<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø§Ø®ØªØ¨Ø§Ø± Ø¥ØµÙ„Ø§Ø­ Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø§Ù„ÙˆØ­Ø¯Ø©</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            direction: rtl;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #dc3545, #c82333);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .header h1 {
            margin: 0 0 10px 0;
            font-size: 2rem;
            font-weight: 700;
        }

        .content {
            padding: 30px;
        }

        .test-button {
            background: linear-gradient(135deg, #007bff, #0056b3);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 10px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            margin: 10px;
            box-shadow: 0 4px 15px rgba(0,123,255,0.3);
        }

        .test-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0,123,255,0.4);
        }

        .test-button.success {
            background: linear-gradient(135deg, #28a745, #20c997);
        }

        .test-button.danger {
            background: linear-gradient(135deg, #dc3545, #c82333);
        }

        .results {
            margin-top: 20px;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 12px;
            border: 1px solid #dee2e6;
        }

        .result-item {
            padding: 12px 16px;
            margin: 8px 0;
            border-radius: 8px;
            border-left: 4px solid #007bff;
            background: white;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .result-item.success {
            border-left-color: #28a745;
            background: #d4edda;
            color: #155724;
        }

        .result-item.error {
            border-left-color: #dc3545;
            background: #f8d7da;
            color: #721c24;
        }

        .result-item.warning {
            border-left-color: #ffc107;
            background: #fff3cd;
            color: #856404;
        }

        .result-item.info {
            border-left-color: #17a2b8;
            background: #d1ecf1;
            color: #0c5460;
        }

        .code-block {
            background: #f8f9fa;
            border: 1px solid #e9ecef;
            border-radius: 8px;
            padding: 15px;
            font-family: 'Courier New', monospace;
            font-size: 0.9rem;
            margin: 10px 0;
            overflow-x: auto;
        }

        .button-group {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            justify-content: center;
            margin: 20px 0;
        }
    </style>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
    <div class="container">
        <div class="header">
            <h1><i class="fas fa-tools"></i> Ø§Ø®ØªØ¨Ø§Ø± Ø¥ØµÙ„Ø§Ø­ Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø§Ù„ÙˆØ­Ø¯Ø©</h1>
            <p>Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ø¥ØµÙ„Ø§Ø­Ø§Øª Ø§Ù„Ù…Ø·Ø¨Ù‚Ø© Ø¹Ù„Ù‰ Ø­ÙØ¸ Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø§Ù„ÙˆØ­Ø¯Ø© ÙÙŠ Supabase</p>
        </div>

        <div class="content">
            <div class="button-group">
                <button class="test-button" onclick="testConversionFunction()">
                    <i class="fas fa-exchange-alt"></i> Ø§Ø®ØªØ¨Ø§Ø± Ø¯Ø§Ù„Ø© Ø§Ù„ØªØ­ÙˆÙŠÙ„
                </button>
                <button class="test-button success" onclick="testDirectSave()">
                    <i class="fas fa-save"></i> Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ø­ÙØ¸ Ø§Ù„Ù…Ø¨Ø§Ø´Ø±
                </button>
                <button class="test-button danger" onclick="testEditModalSave()">
                    <i class="fas fa-edit"></i> Ø§Ø®ØªØ¨Ø§Ø± Ø­ÙØ¸ Ù†Ø§ÙØ°Ø© Ø§Ù„ØªØ­Ø±ÙŠØ±
                </button>
            </div>

            <div id="results" class="results" style="display: none;"></div>
        </div>
    </div>

    <!-- ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ù„ÙØ§Øª Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø© -->
    <script src="supabase-config.js"></script>
    <script src="data-migration.js"></script>
    <script src="script.js"></script>

    <script>
        // Ø¯Ø§Ù„Ø© Ù„Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù†ØªØ§Ø¦Ø¬
        function addResult(type, title, details) {
            const container = document.getElementById('results');
            container.style.display = 'block';
            
            const resultItem = document.createElement('div');
            resultItem.className = `result-item ${type}`;
            resultItem.innerHTML = `
                <div style="font-weight: 600; margin-bottom: 5px;">${title}</div>
                <div style="font-size: 0.95rem; line-height: 1.5;">${details}</div>
            `;
            
            container.appendChild(resultItem);
            resultItem.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
        }

        // Ø§Ø®ØªØ¨Ø§Ø± Ø¯Ø§Ù„Ø© Ø§Ù„ØªØ­ÙˆÙŠÙ„
        function testConversionFunction() {
            addResult('info', 'ğŸ”„ Ø§Ø®ØªØ¨Ø§Ø± Ø¯Ø§Ù„Ø© Ø§Ù„ØªØ­ÙˆÙŠÙ„...', 'Ø¬Ø§Ø±ÙŠ Ø§Ø®ØªØ¨Ø§Ø± convertPropertyToSupabaseFormat');
            
            try {
                // Ø¨ÙŠØ§Ù†Ø§Øª ØªØ¬Ø±ÙŠØ¨ÙŠØ©
                const testProperty = {
                    'Ø±Ù‚Ù…  Ø§Ù„ÙˆØ­Ø¯Ø© ': 'TEST_CONV_001',
                    'Ø§Ø³Ù… Ø§Ù„Ø¹Ù‚Ø§Ø±': 'Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„ØªØ­ÙˆÙŠÙ„',
                    'Ø§Ù„Ù…Ø¯ÙŠÙ†Ø©': 'Ø§Ù„Ø±ÙŠØ§Ø¶',
                    'Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ£Ø¬Ø±': 'Ù…Ø³ØªØ£Ø¬Ø± ØªØ¬Ø±ÙŠØ¨ÙŠ',
                    'Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø§Ù„ÙˆØ­Ø¯Ø©': 'Ù…Ù„Ø§Ø­Ø¸Ø§Øª ØªØ¬Ø±ÙŠØ¨ÙŠØ© Ù„Ù„Ø§Ø®ØªØ¨Ø§Ø±',
                    'Ù‚ÙŠÙ…Ø©  Ø§Ù„Ø§ÙŠØ¬Ø§Ø± ': '5000'
                };

                // Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„ØªØ­ÙˆÙŠÙ„
                const converted = convertPropertyToSupabaseFormat(testProperty);
                
                addResult('success', 'âœ… ØªÙ… Ø§Ù„ØªØ­ÙˆÙŠÙ„ Ø¨Ù†Ø¬Ø§Ø­', `
                    <div class="code-block">
                        <strong>Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø£ØµÙ„ÙŠØ©:</strong><br>
                        Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø§Ù„ÙˆØ­Ø¯Ø©: "${testProperty['Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø§Ù„ÙˆØ­Ø¯Ø©']}"<br><br>
                        <strong>Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø­ÙˆÙ„Ø©:</strong><br>
                        unit_notes: "${converted.unit_notes}"
                    </div>
                `);

                // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„ØªØ­ÙˆÙŠÙ„
                if (converted.unit_notes === testProperty['Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø§Ù„ÙˆØ­Ø¯Ø©']) {
                    addResult('success', 'âœ… Ø§Ù„ØªØ­ÙˆÙŠÙ„ ØµØ­ÙŠØ­', 'Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø§Ù„ÙˆØ­Ø¯Ø© ØªÙ… ØªØ­ÙˆÙŠÙ„Ù‡Ø§ Ø¨Ø´ÙƒÙ„ ØµØ­ÙŠØ­');
                } else {
                    addResult('error', 'âŒ Ù…Ø´ÙƒÙ„Ø© ÙÙŠ Ø§Ù„ØªØ­ÙˆÙŠÙ„', `
                        Ù…ØªÙˆÙ‚Ø¹: "${testProperty['Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø§Ù„ÙˆØ­Ø¯Ø©']}"<br>
                        Ø§Ù„ÙØ¹Ù„ÙŠ: "${converted.unit_notes}"
                    `);
                }

                // Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ø­Ø§Ù„Ø© Ø§Ù„ÙØ§Ø±ØºØ©
                const emptyProperty = {
                    'Ø±Ù‚Ù…  Ø§Ù„ÙˆØ­Ø¯Ø© ': 'TEST_EMPTY',
                    'Ø§Ø³Ù… Ø§Ù„Ø¹Ù‚Ø§Ø±': 'Ø§Ø®ØªØ¨Ø§Ø± ÙØ§Ø±Øº',
                    'Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø§Ù„ÙˆØ­Ø¯Ø©': ''
                };

                const convertedEmpty = convertPropertyToSupabaseFormat(emptyProperty);
                
                if (convertedEmpty.unit_notes === '') {
                    addResult('success', 'âœ… Ø§Ù„ØªØ¹Ø§Ù…Ù„ Ù…Ø¹ Ø§Ù„Ù‚ÙŠÙ… Ø§Ù„ÙØ§Ø±ØºØ© ØµØ­ÙŠØ­', 'Ø§Ù„Ù‚ÙŠÙ… Ø§Ù„ÙØ§Ø±ØºØ© ØªÙØ­ÙˆÙ„ Ø¥Ù„Ù‰ Ù†Øµ ÙØ§Ø±Øº ÙˆÙ„ÙŠØ³ null');
                } else {
                    addResult('warning', 'âš ï¸ Ù…Ø´ÙƒÙ„Ø© ÙÙŠ Ø§Ù„Ù‚ÙŠÙ… Ø§Ù„ÙØ§Ø±ØºØ©', `Ø§Ù„Ù‚ÙŠÙ…Ø© Ø§Ù„ÙØ§Ø±ØºØ© ØªÙØ­ÙˆÙ„ Ø¥Ù„Ù‰: "${convertedEmpty.unit_notes}"`);
                }

            } catch (error) {
                addResult('error', 'âŒ Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±', `Ø®Ø·Ø£: ${error.message}`);
            }
        }

        // Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ø­ÙØ¸ Ø§Ù„Ù…Ø¨Ø§Ø´Ø±
        async function testDirectSave() {
            addResult('info', 'ğŸ”„ Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ø­ÙØ¸ Ø§Ù„Ù…Ø¨Ø§Ø´Ø±...', 'Ø¬Ø§Ø±ÙŠ Ø§Ø®ØªØ¨Ø§Ø± savePropertyToSupabase');
            
            try {
                if (!supabaseClient) {
                    addResult('error', 'âŒ Supabase ØºÙŠØ± Ù…ØªØµÙ„', 'ØªØ£ÙƒØ¯ Ù…Ù† Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ù€ Supabase');
                    return;
                }

                const testProperty = {
                    'Ø±Ù‚Ù…  Ø§Ù„ÙˆØ­Ø¯Ø© ': 'TEST_DIRECT_' + Date.now(),
                    'Ø§Ø³Ù… Ø§Ù„Ø¹Ù‚Ø§Ø±': 'Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ø­ÙØ¸ Ø§Ù„Ù…Ø¨Ø§Ø´Ø±',
                    'Ø§Ù„Ù…Ø¯ÙŠÙ†Ø©': 'Ø§Ù„Ø±ÙŠØ§Ø¶',
                    'Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ£Ø¬Ø±': 'Ù…Ø³ØªØ£Ø¬Ø± ØªØ¬Ø±ÙŠØ¨ÙŠ',
                    'Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø§Ù„ÙˆØ­Ø¯Ø©': 'Ù…Ù„Ø§Ø­Ø¸Ø§Øª ØªØ¬Ø±ÙŠØ¨ÙŠØ© - ' + new Date().toLocaleString('ar-SA'),
                    'Ù‚ÙŠÙ…Ø©  Ø§Ù„Ø§ÙŠØ¬Ø§Ø± ': '5000'
                };

                addResult('info', 'ğŸ“¤ Ø­ÙØ¸ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª...', `
                    Ø±Ù‚Ù… Ø§Ù„ÙˆØ­Ø¯Ø©: ${testProperty['Ø±Ù‚Ù…  Ø§Ù„ÙˆØ­Ø¯Ø© ']}<br>
                    Ø§Ù„Ù…Ù„Ø§Ø­Ø¸Ø§Øª: ${testProperty['Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø§Ù„ÙˆØ­Ø¯Ø©']}
                `);

                const result = await savePropertyToSupabase(testProperty);
                
                if (result && result.success) {
                    addResult('success', 'âœ… ØªÙ… Ø§Ù„Ø­ÙØ¸ Ø¨Ù†Ø¬Ø§Ø­', 'Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø­ÙÙØ¸Øª ÙÙŠ Supabase');
                    
                    // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø­ÙØ¸
                    const { data: verifyData } = await supabaseClient
                        .from('properties')
                        .select('unit_notes')
                        .eq('unit_number', testProperty['Ø±Ù‚Ù…  Ø§Ù„ÙˆØ­Ø¯Ø© '])
                        .single();
                    
                    if (verifyData && verifyData.unit_notes === testProperty['Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø§Ù„ÙˆØ­Ø¯Ø©']) {
                        addResult('success', 'âœ… Ø§Ù„ØªØ­Ù‚Ù‚ Ù†Ø§Ø¬Ø­', 'Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø§Ù„ÙˆØ­Ø¯Ø© Ù…Ø­ÙÙˆØ¸Ø© Ø¨Ø´ÙƒÙ„ ØµØ­ÙŠØ­ ÙÙŠ Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª');
                    } else {
                        addResult('error', 'âŒ Ù…Ø´ÙƒÙ„Ø© ÙÙŠ Ø§Ù„ØªØ­Ù‚Ù‚', `
                            Ù…ØªÙˆÙ‚Ø¹: "${testProperty['Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø§Ù„ÙˆØ­Ø¯Ø©']}"<br>
                            Ø§Ù„ÙØ¹Ù„ÙŠ: "${verifyData?.unit_notes || 'ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯'}"
                        `);
                    }
                    
                    // Ø­Ø°Ù Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ØªØ¬Ø±ÙŠØ¨ÙŠØ©
                    setTimeout(async () => {
                        await supabaseClient
                            .from('properties')
                            .delete()
                            .eq('unit_number', testProperty['Ø±Ù‚Ù…  Ø§Ù„ÙˆØ­Ø¯Ø© ']);
                        addResult('info', 'ğŸ—‘ï¸ ØªÙ†Ø¸ÙŠÙ', 'ØªÙ… Ø­Ø°Ù Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ØªØ¬Ø±ÙŠØ¨ÙŠØ©');
                    }, 3000);
                    
                } else {
                    addResult('error', 'âŒ ÙØ´Ù„ ÙÙŠ Ø§Ù„Ø­ÙØ¸', result?.message || 'Ø®Ø·Ø£ ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ');
                }

            } catch (error) {
                addResult('error', 'âŒ Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±', `Ø®Ø·Ø£: ${error.message}`);
            }
        }

        // Ø§Ø®ØªØ¨Ø§Ø± Ø­ÙØ¸ Ù†Ø§ÙØ°Ø© Ø§Ù„ØªØ­Ø±ÙŠØ±
        async function testEditModalSave() {
            addResult('info', 'ğŸ”„ Ø§Ø®ØªØ¨Ø§Ø± Ù†Ø§ÙØ°Ø© Ø§Ù„ØªØ­Ø±ÙŠØ±...', 'Ø¬Ø§Ø±ÙŠ Ù…Ø­Ø§ÙƒØ§Ø© Ø­ÙØ¸ Ù…Ù† Ù†Ø§ÙØ°Ø© Ø§Ù„ØªØ­Ø±ÙŠØ±');
            
            try {
                // Ù…Ø­Ø§ÙƒØ§Ø© FormData Ù…Ù† Ù†Ø§ÙØ°Ø© Ø§Ù„ØªØ­Ø±ÙŠØ±
                const formData = new FormData();
                formData.append('Ø±Ù‚Ù…  Ø§Ù„ÙˆØ­Ø¯Ø© ', 'TEST_EDIT_' + Date.now());
                formData.append('Ø§Ø³Ù… Ø§Ù„Ø¹Ù‚Ø§Ø±', 'Ø§Ø®ØªØ¨Ø§Ø± Ù†Ø§ÙØ°Ø© Ø§Ù„ØªØ­Ø±ÙŠØ±');
                formData.append('Ø§Ù„Ù…Ø¯ÙŠÙ†Ø©', 'Ø§Ù„Ø±ÙŠØ§Ø¶');
                formData.append('Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ£Ø¬Ø±', 'Ù…Ø³ØªØ£Ø¬Ø± ØªØ¬Ø±ÙŠØ¨ÙŠ');
                formData.append('Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø§Ù„ÙˆØ­Ø¯Ø©', 'Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ù…Ù† Ù†Ø§ÙØ°Ø© Ø§Ù„ØªØ­Ø±ÙŠØ± - ' + new Date().toLocaleString('ar-SA'));
                formData.append('Ù‚ÙŠÙ…Ø©  Ø§Ù„Ø§ÙŠØ¬Ø§Ø± ', '5000');

                // ØªØ­ÙˆÙŠÙ„ FormData Ø¥Ù„Ù‰ ÙƒØ§Ø¦Ù† Ø¹Ø§Ø¯ÙŠ
                const property = {};
                for (let [key, value] of formData.entries()) {
                    property[key] = value;
                }

                addResult('info', 'ğŸ“ Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª...', `
                    <div class="code-block">
                        Ø±Ù‚Ù… Ø§Ù„ÙˆØ­Ø¯Ø©: ${property['Ø±Ù‚Ù…  Ø§Ù„ÙˆØ­Ø¯Ø© ']}<br>
                        Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø§Ù„ÙˆØ­Ø¯Ø©: "${property['Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø§Ù„ÙˆØ­Ø¯Ø©']}"
                    </div>
                `);

                // Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„ØªØ­ÙˆÙŠÙ„
                const converted = convertPropertyToSupabaseFormat(property);
                
                addResult('success', 'âœ… ØªÙ… Ø§Ù„ØªØ­ÙˆÙŠÙ„', `
                    unit_notes ÙÙŠ Supabase: "${converted.unit_notes}"
                `);

                // Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ø­ÙØ¸
                const result = await savePropertyToSupabase(property);
                
                if (result && result.success) {
                    addResult('success', 'âœ… ØªÙ… Ø§Ù„Ø­ÙØ¸ Ù…Ù† Ù†Ø§ÙØ°Ø© Ø§Ù„ØªØ­Ø±ÙŠØ±', 'Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø­ÙÙØ¸Øª Ø¨Ù†Ø¬Ø§Ø­');
                    
                    // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø­ÙØ¸
                    const { data: verifyData } = await supabaseClient
                        .from('properties')
                        .select('unit_notes')
                        .eq('unit_number', property['Ø±Ù‚Ù…  Ø§Ù„ÙˆØ­Ø¯Ø© '])
                        .single();
                    
                    if (verifyData && verifyData.unit_notes === property['Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø§Ù„ÙˆØ­Ø¯Ø©']) {
                        addResult('success', 'ğŸ‰ Ù†Ø¬Ø­ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„ÙƒØ§Ù…Ù„!', 'Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø§Ù„ÙˆØ­Ø¯Ø© ØªØ¹Ù…Ù„ Ø¨Ø´ÙƒÙ„ ØµØ­ÙŠØ­ Ù…Ù† Ù†Ø§ÙØ°Ø© Ø§Ù„ØªØ­Ø±ÙŠØ±');
                    } else {
                        addResult('error', 'âŒ Ù…Ø´ÙƒÙ„Ø© ÙÙŠ Ø§Ù„Ø­ÙØ¸', 'Ø§Ù„Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ù„Ù… ØªÙØ­ÙØ¸ Ø¨Ø´ÙƒÙ„ ØµØ­ÙŠØ­');
                    }
                    
                    // Ø­Ø°Ù Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ØªØ¬Ø±ÙŠØ¨ÙŠØ©
                    setTimeout(async () => {
                        await supabaseClient
                            .from('properties')
                            .delete()
                            .eq('unit_number', property['Ø±Ù‚Ù…  Ø§Ù„ÙˆØ­Ø¯Ø© ']);
                        addResult('info', 'ğŸ—‘ï¸ ØªÙ†Ø¸ÙŠÙ', 'ØªÙ… Ø­Ø°Ù Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ØªØ¬Ø±ÙŠØ¨ÙŠØ©');
                    }, 3000);
                    
                } else {
                    addResult('error', 'âŒ ÙØ´Ù„ ÙÙŠ Ø§Ù„Ø­ÙØ¸', result?.message || 'Ø®Ø·Ø£ ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ');
                }

            } catch (error) {
                addResult('error', 'âŒ Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±', `Ø®Ø·Ø£: ${error.message}`);
            }
        }

        // Ø±Ø³Ø§Ù„Ø© ØªØ±Ø­ÙŠØ¨
        window.addEventListener('load', function() {
            setTimeout(() => {
                addResult('info', 'ğŸš€ Ù…Ø±Ø­Ø¨Ø§Ù‹', 'Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨Ùƒ ÙÙŠ Ø§Ø®ØªØ¨Ø§Ø± Ø¥ØµÙ„Ø§Ø­ Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø§Ù„ÙˆØ­Ø¯Ø©. Ø§Ø¶ØºØ· Ø¹Ù„Ù‰ Ø§Ù„Ø£Ø²Ø±Ø§Ø± Ø£Ø¹Ù„Ø§Ù‡ Ù„Ø¨Ø¯Ø¡ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±');
            }, 1000);
        });
    </script>
</body>
</html>
