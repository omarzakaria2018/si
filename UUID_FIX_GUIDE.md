# ุฅุตูุงุญ ุฎุทุฃ UUID ูู ุงูุชุทุจูู

## ๐จ ุงููุดููุฉ
```
invalid input syntax for type uuid: "prop_1750142497034_0"
```

### ุงูุณุจุจ:
ุงูุชุทุจูู ูุงู ูุญุงูู ุฅุฏุฑุงุฌ ูุนุฑูุงุช ุจุชูุณูู ูุตู ุฎุงุทุฆ ูู ุนููุฏ UUID ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช.

## โ ุงูุญู ุงููุทุจู

### 1. ุฅุตูุงุญ ุงูููุฏ ูู script.js

ุชู ุชุบููุฑ ุฌููุน ุงุณุชุฎุฏุงูุงุช ุงููุนุฑูุงุช ุงููุตูุฉ ุฅูู UUID ุตุญูุญ:

#### ูุจู ุงูุฅุตูุงุญ:
```javascript
id: property.id || `prop_${Date.now()}_${index}`,
id: generateSimpleId('updated'),
id: generateSimpleId('simple'),
id: generateSimpleId('fallback'),
```

#### ุจุนุฏ ุงูุฅุตูุงุญ:
```javascript
id: property.id || generateUUID(),
id: generateUUID(),
id: generateUUID(),
id: generateUUID(),
```

### 2. ุงููููุงุช ุงููุญุฏุซุฉ:

- **script.js**: ุชู ุฅุตูุงุญ 5 ููุงุถุน ุชุณุชุฎุฏู ูุนุฑูุงุช ุฎุงุทุฆุฉ
- **fix-uuid-format.sql**: ููู SQL ูุชูุธูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
- **fix-uuid-error.html**: ุฃุฏุงุฉ ุฅุตูุงุญ ุชูุงุนููุฉ
- **UUID_FIX_GUIDE.md**: ูุฐุง ุงูููู (ุงูุชูุซูู)

## ๐๏ธ ุฎุทูุงุช ุงูุฅุตูุงุญ

### ุงูุทุฑููุฉ 1: ุงูุฅุตูุงุญ ุงูุชููุงุฆู (ุงูุฃุณูู)

1. ุงูุชุญ `fix-uuid-error.html` ูู ุงููุชุตูุญ
2. ุงุถุบุท ุนูู "ุฅุตูุงุญ ุชููุงุฆู ุดุงูู"
3. ุงูุชุธุฑ ุญุชู ุงูุชูุงู ุงูุนูููุฉ
4. ุงุฑุฌุน ููุชุทุจูู ุงูุฃุณุงุณู

### ุงูุทุฑููุฉ 2: ุงูุฅุตูุงุญ ุงููุฏูู

#### ูู Supabase SQL Editor:
```sql
-- ุญุฐู ุงูุณุฌูุงุช ุจูุนุฑูุงุช ุฎุงุทุฆุฉ
DELETE FROM properties 
WHERE id::text LIKE 'prop_%' 
   OR id::text LIKE 'simple_%' 
   OR id::text LIKE 'updated_%' 
   OR id::text LIKE 'fallback_%'
   OR id::text LIKE 'test_%';

-- ูุญุต ุงููุชูุฌุฉ
SELECT COUNT(*) as remaining_records FROM properties;
```

### ุงูุทุฑููุฉ 3: ุงูุฅุตูุงุญ ุงูุดุงูู

ุชุดุบูู ููู `fix-uuid-format.sql` ูุงููุงู ูู Supabase SQL Editor.

## ๐ ุงูุชุญูู ูู ุงูุฅุตูุงุญ

### ุนูุงูุงุช ุงููุฌุงุญ:
- โ ุนุฏู ุธููุฑ ุฎุทุฃ "invalid input syntax for type uuid"
- โ ุนูู ุญูุธ ุงูุจูุงูุงุช ุจุดูู ุทุจูุนู
- โ ุฌููุน ุงููุนุฑูุงุช ุจุชูุณูู UUID ุตุญูุญ

### ูุญุต ุงููุนุฑูุงุช:
```sql
-- ูุญุต ุฃู ุฌููุน ุงููุนุฑูุงุช ุตุญูุญุฉ
SELECT 
    COUNT(*) as total_records,
    COUNT(CASE WHEN id::text ~ '^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$' THEN 1 END) as valid_uuid_count
FROM properties;
```

## ๐ ุชูุงุตูู ุงูุชุบููุฑุงุช

### ูู script.js:

#### ุงูุณุทุฑ 20607:
```javascript
// ูุจู
id: property.id || `prop_${Date.now()}_${index}`,
// ุจุนุฏ
id: property.id || generateUUID(),
```

#### ุงูุณุทุฑ 21598:
```javascript
// ูุจู
propertyData.id = generateSimpleId('updated');
// ุจุนุฏ
propertyData.id = generateUUID();
```

#### ุงูุณุทุฑ 21642:
```javascript
// ูุจู
id: generateSimpleId('simple'),
// ุจุนุฏ
id: generateUUID(),
```

#### ุงูุณุทุฑ 21695:
```javascript
// ูุจู
id: generateSimpleId('fallback'),
// ุจุนุฏ
id: generateUUID(),
```

#### ุงูุณุทุฑ 22361:
```javascript
// ูุจู
id: `prop_${Date.now()}_${index}`,
// ุจุนุฏ
id: generateUUID(),
```

## ๐ง ุฏุงูุฉ generateUUID

ุงูุชุทุจูู ูุณุชุฎุฏู ุฏุงูุฉ `generateUUID()` ุงูููุฌูุฏุฉ ุจุงููุนู:

```javascript
function generateUUID() {
    return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {
        const r = Math.random() * 16 | 0;
        const v = c == 'x' ? r : (r & 0x3 | 0x8);
        return v.toString(16);
    });
}
```

## ๐ ุงููุชูุฌุฉ ุงูููุงุฆูุฉ

### ูุจู ุงูุฅุตูุงุญ:
- โ ุฎุทุฃ UUID ุนูุฏ ุญูุธ ุงูุจูุงูุงุช
- โ ูุนุฑูุงุช ุจุชูุณูู ุฎุงุทุฆ: `prop_1750142497034_0`
- โ ูุดู ูู ุฅุฏุฑุงุฌ ุงูุจูุงูุงุช ูู Supabase

### ุจุนุฏ ุงูุฅุตูุงุญ:
- โ ุญูุธ ุงูุจูุงูุงุช ูุนูู ุจุดูู ุทุจูุนู
- โ ูุนุฑูุงุช ุจุชูุณูู UUID ุตุญูุญ: `550e8400-e29b-41d4-a716-446655440000`
- โ ุฅุฏุฑุงุฌ ุงูุจูุงูุงุช ูู Supabase ูุนูู ุจูุฌุงุญ

## ๐ก ูุตุงุฆุญ ูููุณุชูุจู

1. **ุงุณุชุฎุฏู ุฏุงุฆูุงู `generateUUID()`** ุจุฏูุงู ูู ุงููุนุฑูุงุช ุงููุตูุฉ
2. **ุงุฎุชุจุฑ ุงูุญูุธ** ุจุนุฏ ุฃู ุชุบููุฑุงุช ูู ุงูููุฏ
3. **ุฑุงุฌุน ุฃุฎุทุงุก ูุญุฏุฉ ุงูุชุญูู** ููุชุฃูุฏ ูู ุนุฏู ูุฌูุฏ ูุดุงูู
4. **ุงุญุชูุธ ุจูุณุฎ ุงุญุชูุงุทูุฉ** ูุจู ุชุทุจูู ุฃู ุฅุตูุงุญุงุช

## ๐ ุงููููุงุช ุฐุงุช ุงูุตูุฉ

- `script.js` - ุงูููุฏ ุงูุฃุณุงุณู (ุชู ุฅุตูุงุญู)
- `fix-uuid-format.sql` - ุฅุตูุงุญ ูุงุนุฏุฉ ุงูุจูุงูุงุช
- `fix-uuid-error.html` - ุฃุฏุงุฉ ุงูุฅุตูุงุญ ุงูุชูุงุนููุฉ
- `emergency-data-recovery.html` - ุฃุฏุงุฉ ุงุณุชุนุงุฏุฉ ุงูุจูุงูุงุช
- `remove-rent-amount-column.sql` - ุฅุฒุงูุฉ ุนููุฏ rent_amount

## ๐ ูู ุญุงูุฉ ุงููุดุงูู

ุฅุฐุง ุงุณุชูุฑุช ุงููุดุงูู:
1. ุงูุณุญ cache ุงููุชุตูุญ
2. ุชุฃูุฏ ูู ุชุญุฏูุซ ููู script.js
3. ุงุณุชุฎุฏู ุฃุฏุงุฉ ุงูุฅุตูุงุญ ุงูุชูุงุนููุฉ
4. ุฑุงุฌุน ุณุฌูุงุช ูุญุฏุฉ ุงูุชุญูู ููุฃุฎุทุงุก
