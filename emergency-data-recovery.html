<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø§Ø³ØªØ¹Ø§Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø·Ø§Ø±Ø¦Ø©</title>
    <style>
        body {
            font-family: 'Cairo', sans-serif;
            margin: 20px;
            background-color: #f5f5f5;
            direction: rtl;
        }
        .container {
            max-width: 1000px;
            margin: 0 auto;
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .header {
            text-align: center;
            color: #e74c3c;
            margin-bottom: 30px;
        }
        .recovery-section {
            margin: 20px 0;
            padding: 15px;
            border: 1px solid #ddd;
            border-radius: 5px;
            background: #f9f9f9;
        }
        .recovery-title {
            font-weight: bold;
            color: #34495e;
            margin-bottom: 10px;
        }
        .success {
            color: #27ae60;
            background-color: #d5f4e6;
            padding: 10px;
            border-radius: 5px;
            margin: 5px 0;
        }
        .error {
            color: #e74c3c;
            background-color: #fdf2f2;
            padding: 10px;
            border-radius: 5px;
            margin: 5px 0;
        }
        .info {
            color: #3498db;
            background-color: #ebf3fd;
            padding: 10px;
            border-radius: 5px;
            margin: 5px 0;
        }
        .warning {
            color: #f39c12;
            background-color: #fef9e7;
            padding: 10px;
            border-radius: 5px;
            margin: 5px 0;
        }
        .btn {
            background: linear-gradient(45deg, #e74c3c, #c0392b);
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 5px;
            cursor: pointer;
            margin: 5px;
            font-size: 16px;
        }
        .btn:hover {
            background: linear-gradient(45deg, #c0392b, #e74c3c);
        }
        .btn.success {
            background: linear-gradient(45deg, #27ae60, #229954);
        }
        .btn.success:hover {
            background: linear-gradient(45deg, #229954, #27ae60);
        }
        .results {
            margin-top: 20px;
            padding: 15px;
            border: 1px solid #bdc3c7;
            border-radius: 5px;
            background: white;
            max-height: 400px;
            overflow-y: auto;
        }
        pre {
            background: #2c3e50;
            color: #ecf0f1;
            padding: 15px;
            border-radius: 5px;
            overflow-x: auto;
            font-size: 12px;
        }
        .progress {
            width: 100%;
            height: 20px;
            background-color: #ecf0f1;
            border-radius: 10px;
            overflow: hidden;
            margin: 10px 0;
        }
        .progress-bar {
            height: 100%;
            background: linear-gradient(45deg, #3498db, #2980b9);
            width: 0%;
            transition: width 0.3s ease;
        }
    </style>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸš¨ Ø§Ø³ØªØ¹Ø§Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø·Ø§Ø±Ø¦Ø©</h1>
            <p>Ø£Ø¯Ø§Ø© Ø¥ØµÙ„Ø§Ø­ Ø³Ø±ÙŠØ¹ Ù„Ø§Ø³ØªØ¹Ø§Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…ÙÙ‚ÙˆØ¯Ø©</p>
        </div>

        <div class="recovery-section">
            <div class="recovery-title">ğŸ” ÙØ­Øµ Ø­Ø§Ù„Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª</div>
            <button class="btn" onclick="checkDataStatus()">ÙØ­Øµ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª</button>
            <div id="dataStatusResults" class="results"></div>
        </div>

        <div class="recovery-section">
            <div class="recovery-title">ğŸ’¾ Ø§Ø³ØªØ¹Ø§Ø¯Ø© Ù…Ù† localStorage</div>
            <button class="btn" onclick="recoverFromLocalStorage()">Ø§Ø³ØªØ¹Ø§Ø¯Ø© Ù…Ù† Ø§Ù„ØªØ®Ø²ÙŠÙ† Ø§Ù„Ù…Ø­Ù„ÙŠ</button>
            <div id="localStorageResults" class="results"></div>
        </div>

        <div class="recovery-section">
            <div class="recovery-title">â˜ï¸ Ø§Ø³ØªØ¹Ø§Ø¯Ø© Ù…Ù† Supabase</div>
            <button class="btn" onclick="recoverFromSupabase()">Ø§Ø³ØªØ¹Ø§Ø¯Ø© Ù…Ù† Supabase</button>
            <div id="supabaseResults" class="results"></div>
        </div>

        <div class="recovery-section">
            <div class="recovery-title">ğŸ“„ Ø§Ø³ØªØ¹Ø§Ø¯Ø© Ù…Ù† JSON</div>
            <button class="btn" onclick="recoverFromJSON()">Ø§Ø³ØªØ¹Ø§Ø¯Ø© Ù…Ù† Ù…Ù„Ù JSON</button>
            <div id="jsonResults" class="results"></div>
        </div>

        <div class="recovery-section">
            <div class="recovery-title">ğŸ”§ Ø¥Ù†Ø´Ø§Ø¡ Ø¨ÙŠØ§Ù†Ø§Øª ØªØ¬Ø±ÙŠØ¨ÙŠØ©</div>
            <button class="btn" onclick="createSampleData()">Ø¥Ù†Ø´Ø§Ø¡ Ø¨ÙŠØ§Ù†Ø§Øª ØªØ¬Ø±ÙŠØ¨ÙŠØ©</button>
            <div id="sampleDataResults" class="results"></div>
        </div>

        <div class="recovery-section">
            <div class="recovery-title">ğŸš€ Ø§Ø³ØªØ¹Ø§Ø¯Ø© Ø´Ø§Ù…Ù„Ø©</div>
            <button class="btn success" onclick="fullRecovery()">Ø§Ø³ØªØ¹Ø§Ø¯Ø© Ø´Ø§Ù…Ù„Ø© ØªÙ„Ù‚Ø§Ø¦ÙŠØ©</button>
            <div class="progress">
                <div class="progress-bar" id="recoveryProgress"></div>
            </div>
            <div id="fullRecoveryResults" class="results"></div>
        </div>
    </div>

    <!-- Supabase JavaScript Client -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <!-- Supabase Configuration -->
    <script src="supabase-config.js"></script>

    <script>
        // Ù…ØªØºÙŠØ±Ø§Øª Ø¹Ø§Ù…Ø©
        let recoveredProperties = [];

        // Ø¯Ø§Ù„Ø© Ù…Ø³Ø§Ø¹Ø¯Ø© Ù„Ø¹Ø±Ø¶ Ø§Ù„Ù†ØªØ§Ø¦Ø¬
        function showResult(containerId, type, message) {
            const container = document.getElementById(containerId);
            const div = document.createElement('div');
            div.className = type;
            div.innerHTML = message;
            container.appendChild(div);
        }

        // Ø¯Ø§Ù„Ø© Ù…Ø³Ø§Ø¹Ø¯Ø© Ù„Ù„Ø³Ø¬Ù„
        function log(message, type = 'info') {
            console.log(`[${type.toUpperCase()}] ${message}`);
        }

        // ØªØ­Ø¯ÙŠØ« Ø´Ø±ÙŠØ· Ø§Ù„ØªÙ‚Ø¯Ù…
        function updateProgress(percentage) {
            const progressBar = document.getElementById('recoveryProgress');
            progressBar.style.width = percentage + '%';
        }

        // ÙØ­Øµ Ø­Ø§Ù„Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
        function checkDataStatus() {
            const container = document.getElementById('dataStatusResults');
            container.innerHTML = '';
            
            log('ğŸ” ÙØ­Øµ Ø­Ø§Ù„Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª...');
            
            // ÙØ­Øµ Ø§Ù„Ù…ØªØºÙŠØ±Ø§Øª Ø§Ù„Ø¹Ø§Ù…Ø©
            const hasGlobalProperties = typeof properties !== 'undefined' && properties && properties.length > 0;
            const hasLocalStorage = localStorage.getItem('properties') !== null;
            const hasSupabaseClient = typeof supabaseClient !== 'undefined';
            
            showResult('dataStatusResults', hasGlobalProperties ? 'success' : 'error', 
                `ğŸ“Š Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¹Ø§Ù…Ø©: ${hasGlobalProperties ? `âœ… ${properties.length} Ø¹Ù‚Ø§Ø±` : 'âŒ ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯Ø©'}`);
            
            showResult('dataStatusResults', hasLocalStorage ? 'success' : 'warning', 
                `ğŸ’¾ Ø§Ù„ØªØ®Ø²ÙŠÙ† Ø§Ù„Ù…Ø­Ù„ÙŠ: ${hasLocalStorage ? 'âœ… Ù…ÙˆØ¬ÙˆØ¯' : 'âš ï¸ ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯'}`);
            
            showResult('dataStatusResults', hasSupabaseClient ? 'success' : 'error', 
                `â˜ï¸ Supabase: ${hasSupabaseClient ? 'âœ… Ù…ØªØµÙ„' : 'âŒ ØºÙŠØ± Ù…ØªØµÙ„'}`);

            // ÙØ­Øµ Ø§Ù„Ù†Ø³Ø® Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠØ©
            const backupKeys = Object.keys(localStorage).filter(key => key.startsWith('properties_backup_'));
            if (backupKeys.length > 0) {
                showResult('dataStatusResults', 'info', `ğŸ—‚ï¸ ØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ ${backupKeys.length} Ù†Ø³Ø®Ø© Ø§Ø­ØªÙŠØ§Ø·ÙŠØ©`);
            }

            return { hasGlobalProperties, hasLocalStorage, hasSupabaseClient, backupKeys };
        }

        // Ø§Ø³ØªØ¹Ø§Ø¯Ø© Ù…Ù† localStorage
        function recoverFromLocalStorage() {
            const container = document.getElementById('localStorageResults');
            container.innerHTML = '';
            
            log('ğŸ’¾ Ù…Ø­Ø§ÙˆÙ„Ø© Ø§Ù„Ø§Ø³ØªØ¹Ø§Ø¯Ø© Ù…Ù† localStorage...');
            
            try {
                // Ù…Ø­Ø§ÙˆÙ„Ø© Ø§Ø³ØªØ¹Ø§Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©
                const localData = localStorage.getItem('properties');
                if (localData) {
                    const parsedData = JSON.parse(localData);
                    if (Array.isArray(parsedData) && parsedData.length > 0) {
                        recoveredProperties = parsedData;
                        window.properties = parsedData;
                        showResult('localStorageResults', 'success', `âœ… ØªÙ… Ø§Ø³ØªØ¹Ø§Ø¯Ø© ${parsedData.length} Ø¹Ù‚Ø§Ø± Ù…Ù† localStorage`);
                        return true;
                    }
                }

                // Ù…Ø­Ø§ÙˆÙ„Ø© Ø§Ø³ØªØ¹Ø§Ø¯Ø© Ù…Ù† Ø§Ù„Ù†Ø³Ø® Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠØ©
                const backupKeys = Object.keys(localStorage).filter(key => key.startsWith('properties_backup_'));
                if (backupKeys.length > 0) {
                    // ØªØ±ØªÙŠØ¨ Ø§Ù„Ù†Ø³Ø® Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠØ© Ø­Ø³Ø¨ Ø§Ù„ØªØ§Ø±ÙŠØ® (Ø§Ù„Ø£Ø­Ø¯Ø« Ø£ÙˆÙ„Ø§Ù‹)
                    backupKeys.sort((a, b) => {
                        const timeA = parseInt(a.split('_').pop());
                        const timeB = parseInt(b.split('_').pop());
                        return timeB - timeA;
                    });

                    for (const backupKey of backupKeys) {
                        try {
                            const backupData = JSON.parse(localStorage.getItem(backupKey));
                            if (Array.isArray(backupData) && backupData.length > 0) {
                                recoveredProperties = backupData;
                                window.properties = backupData;
                                showResult('localStorageResults', 'success', 
                                    `âœ… ØªÙ… Ø§Ø³ØªØ¹Ø§Ø¯Ø© ${backupData.length} Ø¹Ù‚Ø§Ø± Ù…Ù† Ø§Ù„Ù†Ø³Ø®Ø© Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠØ©: ${backupKey}`);
                                return true;
                            }
                        } catch (e) {
                            showResult('localStorageResults', 'warning', `âš ï¸ ÙØ´Ù„ ÙÙŠ Ù‚Ø±Ø§Ø¡Ø© Ø§Ù„Ù†Ø³Ø®Ø© Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠØ©: ${backupKey}`);
                        }
                    }
                }

                showResult('localStorageResults', 'error', 'âŒ Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø¨ÙŠØ§Ù†Ø§Øª ØµØ§Ù„Ø­Ø© ÙÙŠ localStorage');
                return false;
            } catch (error) {
                showResult('localStorageResults', 'error', `âŒ Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø§Ø³ØªØ¹Ø§Ø¯Ø©: ${error.message}`);
                return false;
            }
        }

        // Ø§Ø³ØªØ¹Ø§Ø¯Ø© Ù…Ù† Supabase
        async function recoverFromSupabase() {
            const container = document.getElementById('supabaseResults');
            container.innerHTML = '';
            
            log('â˜ï¸ Ù…Ø­Ø§ÙˆÙ„Ø© Ø§Ù„Ø§Ø³ØªØ¹Ø§Ø¯Ø© Ù…Ù† Supabase...');
            
            try {
                if (typeof supabaseClient === 'undefined') {
                    showResult('supabaseResults', 'error', 'âŒ Supabase client ØºÙŠØ± Ù…ØªÙˆÙØ±');
                    return false;
                }

                const { data, error } = await supabaseClient
                    .from('properties')
                    .select('*')
                    .order('created_at', { ascending: false });

                if (error) {
                    throw error;
                }

                if (data && data.length > 0) {
                    // ØªØ­ÙˆÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¥Ù„Ù‰ Ø§Ù„ØªÙ†Ø³ÙŠÙ‚ Ø§Ù„Ù…Ø·Ù„ÙˆØ¨
                    const convertedData = data.map(item => {
                        if (item.raw_data) {
                            return item.raw_data;
                        } else {
                            return {
                                'Ø±Ù‚Ù…  Ø§Ù„ÙˆØ­Ø¯Ø© ': item.unit_number || '',
                                'Ø§Ù„Ù…Ø¯ÙŠÙ†Ø©': item.city || '',
                                'Ø§Ø³Ù… Ø§Ù„Ø¹Ù‚Ø§Ø±': item.property_name || '',
                                'Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ£Ø¬Ø±': item.tenant_name || '',
                                'Ø±Ù‚Ù… Ø§Ù„Ø¹Ù‚Ø¯': item.contract_number || '',
                                'Ù‚ÙŠÙ…Ø©  Ø§Ù„Ø§ÙŠØ¬Ø§Ø± ': item.rent_value || 0,
                                'Ø§Ù„Ø§Ø¬Ù…Ø§Ù„Ù‰': item.total_amount || 0
                            };
                        }
                    });

                    recoveredProperties = convertedData;
                    window.properties = convertedData;
                    
                    // Ø­ÙØ¸ ÙÙŠ localStorage
                    localStorage.setItem('properties', JSON.stringify(convertedData));
                    
                    showResult('supabaseResults', 'success', `âœ… ØªÙ… Ø§Ø³ØªØ¹Ø§Ø¯Ø© ${convertedData.length} Ø¹Ù‚Ø§Ø± Ù…Ù† Supabase`);
                    return true;
                } else {
                    showResult('supabaseResults', 'warning', 'âš ï¸ Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¨ÙŠØ§Ù†Ø§Øª ÙÙŠ Supabase');
                    return false;
                }
            } catch (error) {
                showResult('supabaseResults', 'error', `âŒ Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø§Ø³ØªØ¹Ø§Ø¯Ø© Ù…Ù† Supabase: ${error.message}`);
                return false;
            }
        }

        // Ø§Ø³ØªØ¹Ø§Ø¯Ø© Ù…Ù† JSON
        async function recoverFromJSON() {
            const container = document.getElementById('jsonResults');
            container.innerHTML = '';
            
            log('ğŸ“„ Ù…Ø­Ø§ÙˆÙ„Ø© Ø§Ù„Ø§Ø³ØªØ¹Ø§Ø¯Ø© Ù…Ù† Ù…Ù„Ù JSON...');
            
            try {
                const response = await fetch('data.json');
                if (!response.ok) {
                    throw new Error(`HTTP ${response.status}: ${response.statusText}`);
                }
                
                const data = await response.json();
                if (Array.isArray(data) && data.length > 0) {
                    recoveredProperties = data;
                    window.properties = data;
                    
                    // Ø­ÙØ¸ ÙÙŠ localStorage
                    localStorage.setItem('properties', JSON.stringify(data));
                    
                    showResult('jsonResults', 'success', `âœ… ØªÙ… Ø§Ø³ØªØ¹Ø§Ø¯Ø© ${data.length} Ø¹Ù‚Ø§Ø± Ù…Ù† Ù…Ù„Ù JSON`);
                    return true;
                } else {
                    showResult('jsonResults', 'warning', 'âš ï¸ Ù…Ù„Ù JSON ÙØ§Ø±Øº Ø£Ùˆ ØºÙŠØ± ØµØ§Ù„Ø­');
                    return false;
                }
            } catch (error) {
                showResult('jsonResults', 'error', `âŒ Ø®Ø·Ø£ ÙÙŠ Ù‚Ø±Ø§Ø¡Ø© Ù…Ù„Ù JSON: ${error.message}`);
                return false;
            }
        }

        // Ø¥Ù†Ø´Ø§Ø¡ Ø¨ÙŠØ§Ù†Ø§Øª ØªØ¬Ø±ÙŠØ¨ÙŠØ©
        function createSampleData() {
            const container = document.getElementById('sampleDataResults');
            container.innerHTML = '';
            
            log('ğŸ”§ Ø¥Ù†Ø´Ø§Ø¡ Ø¨ÙŠØ§Ù†Ø§Øª ØªØ¬Ø±ÙŠØ¨ÙŠØ©...');
            
            const sampleData = [
                {
                    'Ø±Ù‚Ù…  Ø§Ù„ÙˆØ­Ø¯Ø© ': 'SAMPLE_001',
                    'Ø§Ù„Ù…Ø¯ÙŠÙ†Ø©': 'Ø§Ù„Ø±ÙŠØ§Ø¶',
                    'Ø§Ø³Ù… Ø§Ù„Ø¹Ù‚Ø§Ø±': 'Ø¹Ù‚Ø§Ø± ØªØ¬Ø±ÙŠØ¨ÙŠ 1',
                    'Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ£Ø¬Ø±': 'Ù…Ø³ØªØ£Ø¬Ø± ØªØ¬Ø±ÙŠØ¨ÙŠ 1',
                    'Ø±Ù‚Ù… Ø§Ù„Ø¹Ù‚Ø¯': 'CONTRACT_001',
                    'Ù‚ÙŠÙ…Ø©  Ø§Ù„Ø§ÙŠØ¬Ø§Ø± ': 50000,
                    'Ø§Ù„Ù…Ø³Ø§Ø­Ø©': 150,
                    'ØªØ§Ø±ÙŠØ® Ø§Ù„Ø¨Ø¯Ø§ÙŠØ©': '01/01/2024',
                    'ØªØ§Ø±ÙŠØ® Ø§Ù„Ù†Ù‡Ø§ÙŠØ©': '31/12/2024',
                    'Ø§Ù„Ø§Ø¬Ù…Ø§Ù„Ù‰': 57500,
                    'Ù†ÙˆØ¹ Ø§Ù„Ø¹Ù‚Ø¯': 'Ø¶Ø±ÙŠØ¨ÙŠ'
                },
                {
                    'Ø±Ù‚Ù…  Ø§Ù„ÙˆØ­Ø¯Ø© ': 'SAMPLE_002',
                    'Ø§Ù„Ù…Ø¯ÙŠÙ†Ø©': 'Ø¬Ø¯Ø©',
                    'Ø§Ø³Ù… Ø§Ù„Ø¹Ù‚Ø§Ø±': 'Ø¹Ù‚Ø§Ø± ØªØ¬Ø±ÙŠØ¨ÙŠ 2',
                    'Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ£Ø¬Ø±': 'Ù…Ø³ØªØ£Ø¬Ø± ØªØ¬Ø±ÙŠØ¨ÙŠ 2',
                    'Ø±Ù‚Ù… Ø§Ù„Ø¹Ù‚Ø¯': 'CONTRACT_002',
                    'Ù‚ÙŠÙ…Ø©  Ø§Ù„Ø§ÙŠØ¬Ø§Ø± ': 40000,
                    'Ø§Ù„Ù…Ø³Ø§Ø­Ø©': 120,
                    'ØªØ§Ø±ÙŠØ® Ø§Ù„Ø¨Ø¯Ø§ÙŠØ©': '01/02/2024',
                    'ØªØ§Ø±ÙŠØ® Ø§Ù„Ù†Ù‡Ø§ÙŠØ©': '31/01/2025',
                    'Ø§Ù„Ø§Ø¬Ù…Ø§Ù„Ù‰': 46000,
                    'Ù†ÙˆØ¹ Ø§Ù„Ø¹Ù‚Ø¯': 'Ø¶Ø±ÙŠØ¨ÙŠ'
                },
                {
                    'Ø±Ù‚Ù…  Ø§Ù„ÙˆØ­Ø¯Ø© ': 'SAMPLE_003',
                    'Ø§Ù„Ù…Ø¯ÙŠÙ†Ø©': 'Ø§Ù„Ø¯Ù…Ø§Ù…',
                    'Ø§Ø³Ù… Ø§Ù„Ø¹Ù‚Ø§Ø±': 'Ø¹Ù‚Ø§Ø± ØªØ¬Ø±ÙŠØ¨ÙŠ 3',
                    'Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ£Ø¬Ø±': '',
                    'Ø±Ù‚Ù… Ø§Ù„Ø¹Ù‚Ø¯': '',
                    'Ù‚ÙŠÙ…Ø©  Ø§Ù„Ø§ÙŠØ¬Ø§Ø± ': 0,
                    'Ø§Ù„Ù…Ø³Ø§Ø­Ø©': 200,
                    'ØªØ§Ø±ÙŠØ® Ø§Ù„Ø¨Ø¯Ø§ÙŠØ©': '',
                    'ØªØ§Ø±ÙŠØ® Ø§Ù„Ù†Ù‡Ø§ÙŠØ©': '',
                    'Ø§Ù„Ø§Ø¬Ù…Ø§Ù„Ù‰': 0,
                    'Ù†ÙˆØ¹ Ø§Ù„Ø¹Ù‚Ø¯': 'Ø´Ø§ØºØ±'
                }
            ];

            recoveredProperties = sampleData;
            window.properties = sampleData;
            
            // Ø­ÙØ¸ ÙÙŠ localStorage
            localStorage.setItem('properties', JSON.stringify(sampleData));
            
            showResult('sampleDataResults', 'success', `âœ… ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ ${sampleData.length} Ø¹Ù‚Ø§Ø± ØªØ¬Ø±ÙŠØ¨ÙŠ`);
            showResult('sampleDataResults', 'info', 'ğŸ’¡ ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ù„Ø¢Ù† Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ø£Ø³Ø§Ø³ÙŠ');
            
            return true;
        }

        // Ø§Ø³ØªØ¹Ø§Ø¯Ø© Ø´Ø§Ù…Ù„Ø©
        async function fullRecovery() {
            const container = document.getElementById('fullRecoveryResults');
            container.innerHTML = '';
            
            showResult('fullRecoveryResults', 'info', 'ğŸš€ Ø¨Ø¯Ø¡ Ø¹Ù…Ù„ÙŠØ© Ø§Ù„Ø§Ø³ØªØ¹Ø§Ø¯Ø© Ø§Ù„Ø´Ø§Ù…Ù„Ø©...');
            updateProgress(10);

            // Ø§Ù„Ø®Ø·ÙˆØ© 1: ÙØ­Øµ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
            const status = checkDataStatus();
            updateProgress(20);

            if (status.hasGlobalProperties) {
                showResult('fullRecoveryResults', 'success', 'âœ… Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…ÙˆØ¬ÙˆØ¯Ø© Ø¨Ø§Ù„ÙØ¹Ù„ - Ù„Ø§ Ø­Ø§Ø¬Ø© Ù„Ù„Ø§Ø³ØªØ¹Ø§Ø¯Ø©');
                updateProgress(100);
                return;
            }

            // Ø§Ù„Ø®Ø·ÙˆØ© 2: Ù…Ø­Ø§ÙˆÙ„Ø© Ø§Ù„Ø§Ø³ØªØ¹Ø§Ø¯Ø© Ù…Ù† localStorage
            updateProgress(30);
            if (await recoverFromLocalStorage()) {
                showResult('fullRecoveryResults', 'success', 'âœ… ØªÙ… Ø§Ù„Ø§Ø³ØªØ¹Ø§Ø¯Ø© Ù…Ù† localStorage');
                updateProgress(100);
                setTimeout(() => {
                    window.location.href = 'index.html';
                }, 2000);
                return;
            }

            // Ø§Ù„Ø®Ø·ÙˆØ© 3: Ù…Ø­Ø§ÙˆÙ„Ø© Ø§Ù„Ø§Ø³ØªØ¹Ø§Ø¯Ø© Ù…Ù† Supabase
            updateProgress(50);
            if (await recoverFromSupabase()) {
                showResult('fullRecoveryResults', 'success', 'âœ… ØªÙ… Ø§Ù„Ø§Ø³ØªØ¹Ø§Ø¯Ø© Ù…Ù† Supabase');
                updateProgress(100);
                setTimeout(() => {
                    window.location.href = 'index.html';
                }, 2000);
                return;
            }

            // Ø§Ù„Ø®Ø·ÙˆØ© 4: Ù…Ø­Ø§ÙˆÙ„Ø© Ø§Ù„Ø§Ø³ØªØ¹Ø§Ø¯Ø© Ù…Ù† JSON
            updateProgress(70);
            if (await recoverFromJSON()) {
                showResult('fullRecoveryResults', 'success', 'âœ… ØªÙ… Ø§Ù„Ø§Ø³ØªØ¹Ø§Ø¯Ø© Ù…Ù† Ù…Ù„Ù JSON');
                updateProgress(100);
                setTimeout(() => {
                    window.location.href = 'index.html';
                }, 2000);
                return;
            }

            // Ø§Ù„Ø®Ø·ÙˆØ© 5: Ø¥Ù†Ø´Ø§Ø¡ Ø¨ÙŠØ§Ù†Ø§Øª ØªØ¬Ø±ÙŠØ¨ÙŠØ© ÙƒØ­Ù„ Ø£Ø®ÙŠØ±
            updateProgress(90);
            if (createSampleData()) {
                showResult('fullRecoveryResults', 'warning', 'âš ï¸ ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø¨ÙŠØ§Ù†Ø§Øª ØªØ¬Ø±ÙŠØ¨ÙŠØ© ÙƒØ­Ù„ Ø£Ø®ÙŠØ±');
                showResult('fullRecoveryResults', 'info', 'ğŸ’¡ Ø³ÙŠØªÙ… ØªÙˆØ¬ÙŠÙ‡Ùƒ Ù„Ù„ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ø£Ø³Ø§Ø³ÙŠ Ø®Ù„Ø§Ù„ 3 Ø«ÙˆØ§Ù†...');
                updateProgress(100);
                setTimeout(() => {
                    window.location.href = 'index.html';
                }, 3000);
                return;
            }

            // ÙØ´Ù„ ÙÙŠ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø§Øª
            showResult('fullRecoveryResults', 'error', 'âŒ ÙØ´Ù„ ÙÙŠ Ø¬Ù…ÙŠØ¹ Ù…Ø­Ø§ÙˆÙ„Ø§Øª Ø§Ù„Ø§Ø³ØªØ¹Ø§Ø¯Ø©');
            updateProgress(100);
        }

        // ØªØ´ØºÙŠÙ„ ÙØ­Øµ Ø£ÙˆÙ„ÙŠ Ø¹Ù†Ø¯ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø©
        document.addEventListener('DOMContentLoaded', function() {
            log('ğŸš€ ØªÙ… ØªØ­Ù…ÙŠÙ„ Ø£Ø¯Ø§Ø© Ø§Ù„Ø§Ø³ØªØ¹Ø§Ø¯Ø© Ø§Ù„Ø·Ø§Ø±Ø¦Ø©', 'success');
            checkDataStatus();
        });
    </script>
</body>
</html>
