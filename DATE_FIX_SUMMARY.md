# ููุฎุต ุฅุตูุงุญ ูุดููุฉ ุงูุชูุงุฑูุฎ ูู Supabase - ุงูุฅุตุฏุงุฑ ุงูููุงุฆู

## ๐จ ุงููุดููุฉ ุงููุญุฏุฏุฉ
ูุงูุช ุงูุชูุงุฑูุฎ ุชูุฑุณู ุฅูู Supabase ุจุตูุบุฉ ุฎุงุทุฆุฉ ููุง ูุณุจุจ ุฎุทุฃ:
```
date/time field value out of range: "15/11/2020"
```

## ๐ ุงูุณุจุจ ุงูุฌุฐุฑู ูููุดููุฉ
ุชู ุงูุชุดุงู ุฃู ููู `data.json` ูุญุชูู ุนูู ุชูุงุฑูุฎ ุจุตูุบ ูุฎุชูุทุฉ:
- `YYYY-MM-DD HH:MM:SS` (ูุซู: `"2025-02-01 00:00:00"`)
- `DD/MM/YYYY` (ูุซู: `"31/1/2026"`)
- `DD-MM-YYYY` (ูุซู: `"31-3-2025"`)

ููุงูุช ุฏูุงู ุงูุชุญููู ูุง ุชุชุนุงูู ูุน ุตูุบุฉ `YYYY-MM-DD HH:MM:SS` ุจุดูู ุตุญูุญ.

## ๐ง ุงูุฅุตูุงุญุงุช ุงููุทุจูุฉ

### 1. ุฅุตูุงุญ ุฏุงูุฉ `parseDate` ูู `data-migration.js` (ุงูุณุทุฑ 54-131)
**ุงููุดููุฉ:** ูุงูุช ุงูุฏุงูุฉ ุชุญูู ุงูุชูุงุฑูุฎ ุจุทุฑููุฉ ุบูุฑ ูุชุณูุฉ
**ุงูุญู:** ุชุญุณูู ุงูุฏุงูุฉ ูุชุญููู ุฌููุน ุงูุชูุงุฑูุฎ ุฅูู ุตูุบุฉ `YYYY-MM-DD` ูู Supabase

```javascript
// ูุจู ุงูุฅุตูุงุญ
return new Date(dateStr);

// ุจุนุฏ ุงูุฅุตูุงุญ
return `${year}-${month.toString().padStart(2, '0')}-${day.toString().padStart(2, '0')}`;
```

### 2. ุฅุตูุงุญ ูุนุงูุฌุฉ `end_date` ูู `convertPropertyToSupabaseFormat`
**ุงููุดููุฉ:** ูุงู `end_date` ูุง ููุฑ ุนุจุฑ ุฏุงูุฉ `parseDate`
**ุงูุญู:** ุชุทุจูู `parseDate` ุนูู ุฌููุน ุญููู ุงูุชูุงุฑูุฎ

```javascript
// ูุจู ุงูุฅุตูุงุญ
end_date: jsonProperty['ุชุงุฑูุฎ ุงูููุงูุฉ'] || null,

// ุจุนุฏ ุงูุฅุตูุงุญ
end_date: parseDate(jsonProperty['ุชุงุฑูุฎ ุงูููุงูุฉ']) || null,
```

### 3. ุชุญุณูู ุงูุชุญูู ูู ุตุญุฉ ุงูุชูุงุฑูุฎ
**ุงูุฅุถุงูุฉ:** ุฅุถุงูุฉ ุงูุชุญูู ุจุงุณุชุฎุฏุงู `Date object` ูุชุฌูุจ ุชูุงุฑูุฎ ุบูุฑ ุตุงูุญุฉ ูุซู 31 ูุจุฑุงูุฑ

```javascript
const testDate = new Date(year, month - 1, day, 12, 0, 0);
if (testDate.getFullYear() === year && testDate.getMonth() === (month - 1) && testDate.getDate() === day) {
    return `${year}-${month.toString().padStart(2, '0')}-${day.toString().padStart(2, '0')}`;
}
```

### 4. ุฅุตูุงุญ ุฏุงูุฉ `parseDate` ูู `script.js` (ุงูุณุทุฑ 21467-21505)
**ุงููุดููุฉ:** ูุงูุช ุชุณุชุฎุฏู `toISOString()` ููุง ูุณุจุจ ูุดุงูู timezone
**ุงูุญู:** ุฅุฑุฌุงุน ุงูุชูุงุฑูุฎ ุจุตูุบุฉ `YYYY-MM-DD` ูุจุงุดุฑุฉ

### 5. ุฅุตูุงุญ ุฏุงูุฉ `formatDateForStorage` ูู `script.js` (ุงูุณุทุฑ 8291-8307)
**ุงููุดููุฉ:** ูุงูุช ุชุณุชุฎุฏู `toISOString()`
**ุงูุญู:** ุฅุฑุฌุงุน ุงูุชูุงุฑูุฎ ุจุตูุบุฉ `YYYY-MM-DD` ุจุฏูู ุงุณุชุฎุฏุงู `toISOString()`

### 6. ุฅุถุงูุฉ ุฏุนู ุตูุบุฉ `YYYY-MM-DD HH:MM:SS` ูู `data-migration.js` (ุงูุณุทุฑ 122-156)
**ุงููุดููุฉ:** ุฏุงูุฉ `parseDate` ูุง ุชุชุนุงูู ูุน ุงูุชูุงุฑูุฎ ุงูุชู ุชุญุชูู ุนูู ููุช
**ุงูุญู:** ุฅุถุงูุฉ ูุนุงูุฌุฉ ุฎุงุตุฉ ูุงุณุชุฎุฑุงุฌ ุงูุฌุฒุก ุงูุฎุงุต ุจุงูุชุงุฑูุฎ ููุท

```javascript
// ุฅุถุงูุฉ ูุนุงูุฌุฉ ููุตูุบุฉ YYYY-MM-DD HH:MM:SS
if (dateStr.match(/^\d{4}-\d{1,2}-\d{1,2}\s+\d{1,2}:\d{1,2}:\d{1,2}$/)) {
    const datePart = dateStr.split(' ')[0]; // ุงุณุชุฎุฑุงุฌ ุงูุฌุฒุก ุงูุฎุงุต ุจุงูุชุงุฑูุฎ ููุท
    // ... ูุนุงูุฌุฉ ุงูุชุงุฑูุฎ
}
```

### 7. ุชุญุฏูุซ ุฏุงูุฉ `parseDate` ูู `script.js` (ุงูุณุทุฑ 1582-1639)
**ุงููุดููุฉ:** ููุณ ุงููุดููุฉ - ุนุฏู ุฏุนู ุตูุบุฉ `YYYY-MM-DD HH:MM:SS`
**ุงูุญู:** ุฅุถุงูุฉ ููุณ ุงููุนุงูุฌุฉ ููุชูุงุฑูุฎ ุงูุชู ุชุญุชูู ุนูู ููุช

## ๐ ุงููููุงุช ุงููุญุฏุซุฉ

1. **`data-migration.js`**
   - ุฏุงูุฉ `parseDate` (ุงูุณุทุฑ 54-131)
   - ุฏุงูุฉ `convertPropertyToSupabaseFormat` (ุงูุณุทุฑ 21)

2. **`script.js`**
   - ุฏุงูุฉ `parseDate` (ุงูุณุทุฑ 21467-21505)
   - ุฏุงูุฉ `formatDateForStorage` (ุงูุณุทุฑ 8291-8307)

## ๐งช ูููุงุช ุงูุงุฎุชุจุงุฑ ุงููุถุงูุฉ

1. **`test-date-conversion.html`**
   - ุงุฎุชุจุงุฑ ุชุญููู ุงูุชูุงุฑูุฎ ูู `dd/mm/yyyy` ุฅูู `yyyy-mm-dd`
   - ุงุฎุชุจุงุฑ ุฏุงูุฉ `parseDate`
   - ุงุฎุชุจุงุฑ ุชุญููู ุนูุงุฑ ูุงูู

2. **`test-supabase-dates.html`**
   - ุงุฎุชุจุงุฑ ุงูุงุชุตุงู ุจู Supabase
   - ุงุฎุชุจุงุฑ ุฅุฑุณุงู ุงูุชูุงุฑูุฎ ุฅูู Supabase
   - ุงูุชุญูู ูู ุตูุบุฉ ุงูุชูุงุฑูุฎ ุงููุฑุณูุฉ

## โ ุงููุชุงุฆุฌ ุงููุชููุนุฉ

### ูุจู ุงูุฅุตูุงุญ:
```
โ date/time field value out of range: "15/11/2020"
โ ุงูุชูุงุฑูุฎ ุจุตูุบุฉ dd/mm/yyyy ุชูุฑุณู ูุจุงุดุฑุฉ ุฅูู Supabase
โ ุฎุทุฃ ูู ุฅุฏุฑุงุฌ ุงูุจูุงูุงุช
```

### ุจุนุฏ ุงูุฅุตูุงุญ:
```
โ ุงูุชูุงุฑูุฎ ุชูุญูู ุฅูู ุตูุบุฉ YYYY-MM-DD
โ ุฌููุน ุงูุชูุงุฑูุฎ ุตุงูุญุฉ ูุจู ุงูุฅุฑุณุงู
โ ุฅุฏุฑุงุฌ ุงูุจูุงูุงุช ูุงุฌุญ ูู Supabase
โ ูุง ุชูุฌุฏ ุฃุฎุทุงุก ูู ุงูุชูุงุฑูุฎ
```

## ๐ ููููุฉ ุงูุชุญูู ูู ุงูุฅุตูุงุญ

1. **ุงูุชุญ `test-date-conversion.html`** ูุงุถุบุท "ุชุดุบูู ุงูุงุฎุชุจุงุฑุงุช"
2. **ุงูุชุญ `test-supabase-dates.html`** ูุงุถุบุท "ุงุฎุชุจุงุฑ ุฅุฑุณุงู ุงูุจูุงูุงุช"
3. **ูู Console ุงููุชุตูุญ** ุชุญูู ูู ุนุฏู ูุฌูุฏ ุฃุฎุทุงุก ุชูุงุฑูุฎ
4. **ูู Supabase Dashboard** ุชุญูู ูู ุฅุฏุฑุงุฌ ุงูุจูุงูุงุช ุจูุฌุงุญ

## ๐ ููุงุญุธุงุช ูููุฉ

- ุฌููุน ุงูุชูุงุฑูุฎ ุงูุขู ุชูุญูู ุฅูู ุตูุบุฉ `YYYY-MM-DD` ูุจู ุงูุฅุฑุณุงู ุฅูู Supabase
- ุชู ุฅุถุงูุฉ ุงูุชุญูู ูู ุตุญุฉ ุงูุชูุงุฑูุฎ ูุชุฌูุจ ุชูุงุฑูุฎ ุบูุฑ ุตุงูุญุฉ
- ุชู ุชุฌูุจ ุงุณุชุฎุฏุงู `toISOString()` ูููุน ูุดุงูู timezone
- ุงูููุฏ ูุฏุนู ุชุญููู ุงูุชูุงุฑูุฎ ูู ุตูุบ ูุฎุชููุฉ: `dd/mm/yyyy`, `dd-mm-yyyy`, `yyyy-mm-dd`

## ๐ฏ ุงูุฎูุงุตุฉ

ุชู ุญู ูุดููุฉ **"date/time field value out of range"** ุจุงููุงูู ูู ุฎูุงู:
1. ุชุญููู ุฌููุน ุงูุชูุงุฑูุฎ ุฅูู ุตูุบุฉ `YYYY-MM-DD` ูุจู ุงูุฅุฑุณุงู
2. ุงูุชุญูู ูู ุตุญุฉ ุงูุชูุงุฑูุฎ
3. ุชุฌูุจ ุงุณุชุฎุฏุงู `toISOString()` 
4. ุฅุถุงูุฉ ุงุฎุชุจุงุฑุงุช ุดุงููุฉ ููุชุญูู ูู ุงูุฅุตูุงุญ

**ุงููุดููุฉ ูุญูููุฉ ููุงุฆูุงู! ๐**
