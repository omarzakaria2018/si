# ๐ ูุธุงู ุฅุฏุงุฑุฉ ุงูุญุงูุฉ - State Management System

## ๐ ูุธุฑุฉ ุนุงูุฉ

ุชู ุฅุถุงูุฉ ูุธุงู ูุชูุฏู ูุญูุธ ูุงุณุชุนุงุฏุฉ ุญุงูุฉ ุงูุชุทุจูู ุชููุงุฆูุงู. ูุฐุง ุงููุธุงู ูุถูู ุฃู ุงููุณุชุฎุฏู ูุนูุฏ ุฅูู ููุณ ุงูุตูุญุฉ ูุงูุฅุนุฏุงุฏุงุช ุงูุชู ูุงู ูุณุชุฎุฏููุง ูุจู ุฅุนุงุฏุฉ ุชุญููู ุงูุตูุญุฉ.

## โจ ุงูููุฒุงุช

### ๐ ุงูุญูุธ ุงูุชููุงุฆู
- **ุญูุธ ููุฑู** ุนูุฏ ุชุบููุฑ ุฃู ุฅุนุฏุงุฏ ููู
- **ุญูุธ ุฏูุฑู** ูู ุซุงููุชูู ุฅุฐุง ุชุบูุฑ ุดูุก
- **ุญูุธ ุนูุฏ ุงูุฅุบูุงู** ูุจู ุฅุบูุงู ุงูุตูุญุฉ ุฃู ุชุจุฏูู ุงูุชุจููุจุงุช

### ๐ ุงูุจูุงูุงุช ุงููุญููุธุฉ
- **ุงููุฏููุฉ ุงููุฎุชุงุฑุฉ** (currentCountry)
- **ุงูุนูุงุฑ ุงููุฎุชุงุฑ** (currentProperty)  
- **ุทุฑููุฉ ุงูุนุฑุถ** (ุฌุฏูู ุฃู ุจุทุงูุงุช)
- **ููุชุฑ ุงูุญุงูุฉ** (ุฌุงุฑูุ ููุชููุ ุนูู ูุดูุ ูุงุฑุบ)
- **ูุต ุงูุจุญุซ ุงูุนุงู**
- **ูุต ุจุญุซ ุงูุนูุงุฑุงุช**
- **ุญุงูุฉ ุงูุดุฑูุท ุงูุฌุงูุจู** (ููุชูุญ/ูุบูู)
- **ูุถุน ุงูุฅุฏุงุฑุฉ** (ุฅู ูุงู ููุนูุงู)

### โฐ ุฅุฏุงุฑุฉ ุฐููุฉ ููุจูุงูุงุช
- **ุงูุชูุงุก ุตูุงุญูุฉ** ุงูุจูุงูุงุช ุจุนุฏ 24 ุณุงุนุฉ
- **ุชูุธูู ุชููุงุฆู** ููุจูุงูุงุช ุงููุฏููุฉ
- **ุญูุงูุฉ ูู ุงูุฃุฎุทุงุก** ูุน ูุนุงูุฌุฉ ุดุงููุฉ ููุงุณุชุซูุงุกุงุช

## ๐๏ธ ููููุฉ ุงูุนูู

### 1. ุงูุญูุธ ุงูุชููุงุฆู
```javascript
// ูุชู ุงูุญูุธ ุชููุงุฆูุงู ุนูุฏ:
selectCountry('ุงูุฑูุงุถ');     // ุชุบููุฑ ุงููุฏููุฉ
selectProperty('ุนูุงุฑ 1');    // ุชุบููุฑ ุงูุนูุงุฑ
setStatusFilter('ุฌุงุฑู');     // ุชุบููุฑ ููุชุฑ ุงูุญุงูุฉ
toggleView('table');         // ุชุบููุฑ ุทุฑููุฉ ุงูุนุฑุถ
```

### 2. ุงูุงุณุชุนุงุฏุฉ ุนูุฏ ุงูุชุญููู
```javascript
// ูุชู ุงุณุชุฏุนุงุคูุง ุชููุงุฆูุงู ุนูุฏ ุชุญููู ุงูุตูุญุฉ
document.addEventListener('DOMContentLoaded', function() {
    const restoredState = restoreAppState();
    if (restoredState) {
        applyRestoredState(restoredState);
    }
});
```

### 3. ุงููุณุญ ุงููุฏูู
```javascript
// ูุชุงุญ ูู ูุงุฆูุฉ ุงูุฌูุงู
clearAppStateWithConfirmation();
```

## ๐ง ุงููุธุงุฆู ุงูุฑุฆูุณูุฉ

### `saveAppState()`
ุญูุธ ุงูุญุงูุฉ ุงูุญุงููุฉ ูู localStorage
```javascript
function saveAppState() {
    const state = {
        currentView: currentView,
        currentCountry: currentCountry,
        currentProperty: currentProperty,
        filterStatus: filterStatus,
        globalSearchValue: document.getElementById('globalSearch')?.value || '',
        propertySearchValue: document.getElementById('propertySearch')?.value || '',
        sidebarVisible: document.getElementById('sidebar')?.style.display !== 'none',
        timestamp: Date.now()
    };
    localStorage.setItem(STATE_STORAGE_KEY, JSON.stringify(state));
}
```

### `restoreAppState()`
ุงุณุชุนุงุฏุฉ ุงูุญุงูุฉ ูู localStorage
```javascript
function restoreAppState() {
    const savedState = localStorage.getItem(STATE_STORAGE_KEY);
    if (!savedState) return false;
    
    const state = JSON.parse(savedState);
    
    // ุงูุชุญูู ูู ุงูุชูุงุก ุงูุตูุงุญูุฉ (24 ุณุงุนุฉ)
    const maxAge = 24 * 60 * 60 * 1000;
    if (Date.now() - state.timestamp > maxAge) {
        localStorage.removeItem(STATE_STORAGE_KEY);
        return false;
    }
    
    return state;
}
```

### `applyRestoredState(state)`
ุชุทุจูู ุงูุญุงูุฉ ุงููุณุชุนุงุฏุฉ ุนูู ุงูุชุทุจูู
```javascript
function applyRestoredState(state) {
    // ุงุณุชุนุงุฏุฉ ุงููุชุบูุฑุงุช
    currentView = state.currentView || 'cards';
    currentCountry = state.currentCountry;
    currentProperty = state.currentProperty;
    filterStatus = state.filterStatus;
    
    // ุชุญุฏูุซ ูุงุฌูุฉ ุงููุณุชุฎุฏู
    initCountryButtons();
    initPropertyList(currentCountry);
    renderData();
}
```

## ๐ฏ ููุงุท ุงูุญูุธ ุงูุชููุงุฆู

### 1. ุนูุฏ ุชุบููุฑ ุงูุฅุนุฏุงุฏุงุช
- ุชุบููุฑ ุงููุฏููุฉ โ `selectCountry()`
- ุชุบููุฑ ุงูุนูุงุฑ โ `selectProperty()`
- ุชุบููุฑ ููุชุฑ ุงูุญุงูุฉ โ `setStatusFilter()`
- ุชุบููุฑ ุทุฑููุฉ ุงูุนุฑุถ โ `toggleView()`

### 2. ุนูุฏ ุฃุญุฏุงุซ ุงููุธุงู
- ุฅุบูุงู ุงูุตูุญุฉ โ `beforeunload`
- ุฅุฎูุงุก ุงูุตูุญุฉ โ `visibilitychange`
- ุชุบููุฑ ุญุฌู ุงููุงูุฐุฉ โ `resize`
- ุชุบููุฑ ูุต ุงูุจุญุซ โ `input` (ูุน ุชุฃุฎูุฑ)

### 3. ุงูุญูุธ ุงูุฏูุฑู
- ูู ุซุงููุชูู ุฅุฐุง ุชุบูุฑุช ุงูุญุงูุฉ
- ููุงุฑู ุงูุญุงูุฉ ุงูุญุงููุฉ ูุน ุงููุญููุธุฉ
- ูุญูุธ ููุท ุนูุฏ ูุฌูุฏ ุชุบููุฑ

## ๐งช ุงูุงุฎุชุจุงุฑ

### ููู ุงูุงุฎุชุจุงุฑ
ุงุณุชุฎุฏู `test-state-management.html` ูุงุฎุชุจุงุฑ ุงููุธุงู:

```bash
# ูุชุญ ููู ุงูุงุฎุชุจุงุฑ
open test-state-management.html
```

### ุงุฎุชุจุงุฑุงุช ูุชุงุญุฉ
1. **ุงุฎุชุจุงุฑ ุงูุญูุธ** - ุญูุธ ุญุงูุฉ ุชุฌุฑูุจูุฉ
2. **ุงุฎุชุจุงุฑ ุงูุงุณุชุนุงุฏุฉ** - ุงุณุชุนุงุฏุฉ ุงูุญุงูุฉ ุงููุญููุธุฉ
3. **ุงุฎุชุจุงุฑ ุงููุณุญ** - ูุณุญ ุงูุญุงูุฉ ุงููุญููุธุฉ
4. **ุนุฑุถ ุงูุญุงูุฉ** - ุนุฑุถ ุงูุญุงูุฉ ุงูุญุงููุฉ
5. **ูุญุงูุงุฉ ุฅุนุงุฏุฉ ุงูุชุญููู** - ุงุฎุชุจุงุฑ ุฏูุฑุฉ ูุงููุฉ

## ๐ ุงูุฃูุงู ูุงูุฎุตูุตูุฉ

### ุญูุงูุฉ ุงูุจูุงูุงุช
- **ุชุฎุฒูู ูุญูู ููุท** - ูุง ูุชู ุฅุฑุณุงู ุงูุจูุงูุงุช ููุฎุงุฏู
- **ุงูุชูุงุก ุตูุงุญูุฉ** - ุงูุจูุงูุงุช ุชูุชูู ุตูุงุญูุชูุง ุชููุงุฆูุงู
- **ุชุดููุฑ ุบูุฑ ูุทููุจ** - ุงูุจูุงูุงุช ุบูุฑ ุญุณุงุณุฉ

### ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก
- **try-catch ุดุงูู** ูู ุฌููุน ุงููุธุงุฆู
- **ุชุณุฌูู ููุตู** ููุฃุฎุทุงุก ูู console
- **ุงุณุชูุฑุงุฑูุฉ ุงูุนูู** ุญุชู ูู ูุดู ุงููุธุงู

## ๐ฑ ุงูุชูุงูู

### ุงููุชุตูุญุงุช ุงููุฏุนููุฉ
- โ Chrome 4+
- โ Firefox 3.5+
- โ Safari 4+
- โ Edge 12+
- โ Opera 10.5+

### ุงูุฃุฌูุฒุฉ
- โ ุฃุฌูุฒุฉ ุณุทุญ ุงูููุชุจ
- โ ุงูุฃุฌูุฒุฉ ุงูููุญูุฉ
- โ ุงูููุงุชู ุงูุฐููุฉ

## ๐ ุงูุงุณุชุฎุฏุงู

### ูููุณุชุฎุฏููู
1. **ุงุณุชุฎุฏู ุงูุชุทุจูู ุจุดูู ุทุจูุนู**
2. **ุงููุธุงู ูุญูุธ ุชููุงุฆูุงู**
3. **ุนูุฏ ุฅุนุงุฏุฉ ุงูุชุญููู ุณุชุนูุฏ ููุญุงูุฉ ุงูุณุงุจูุฉ**
4. **ูุฅุนุงุฏุฉ ุงูุชุนููู**: ูุงุฆูุฉ ุงูุฌูุงู โ "ุฅุนุงุฏุฉ ุชุนููู ุงูุญุงูุฉ"

### ูููุทูุฑูู
```javascript
// ุญูุธ ูุฏูู
saveAppState();

// ุงุณุชุนุงุฏุฉ ูุฏููุฉ
const state = restoreAppState();
if (state) applyRestoredState(state);

// ูุณุญ ูุฏูู
clearAppState();
```

## ๐ง ุงูุชุฎุตูุต

### ุฅุถุงูุฉ ุจูุงูุงุช ุฌุฏูุฏุฉ ููุญูุธ
```javascript
// ูู ูุธููุฉ saveAppState()
const state = {
    // ุงูุจูุงูุงุช ุงูููุฌูุฏุฉ...
    newProperty: newValue,  // ุฅุถุงูุฉ ุฎุงุตูุฉ ุฌุฏูุฏุฉ
};
```

### ุชุบููุฑ ูุฏุฉ ุงูุชูุงุก ุงูุตูุงุญูุฉ
```javascript
// ูู ูุธููุฉ restoreAppState()
const maxAge = 48 * 60 * 60 * 1000; // 48 ุณุงุนุฉ ุจุฏูุงู ูู 24
```

## ๐ ุงูุฏุนู

ูููุณุงุนุฏุฉ ุฃู ุงูุฅุจูุงุบ ุนู ูุดุงูู:
- **ุงููุทูุฑ**: ุนูุฑ ุฒูุฑูุง
- **ุงูุงุฎุชุจุงุฑ**: `test-state-management.html`
- **ุงูุณุฌูุงุช**: ูุชุญ Developer Tools โ Console

---

โ **ุงููุธุงู ุฌุงูุฒ ููุนูู ุชููุงุฆูุงู!**
