<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ§ª Ø§Ø®ØªØ¨Ø§Ø± Ù†Ø¸Ø§Ù… ØªØ±ØªÙŠØ¨ Ø§Ù„Ø¹Ù‚Ø§Ø±Ø§Øª Ø§Ù„Ø«Ø§Ø¨Øª</title>
    <style>
        body {
            font-family: 'Tajawal', sans-serif;
            margin: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        .container {
            background: white;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            max-width: 1200px;
            margin: 0 auto;
        }
        .header {
            text-align: center;
            margin-bottom: 30px;
            padding: 20px;
            background: linear-gradient(135deg, #6c5ce7, #a29bfe);
            border-radius: 10px;
            color: white;
        }
        .test-section {
            margin: 20px 0;
            padding: 20px;
            border-radius: 10px;
            border: 1px solid #e9ecef;
            background: #f8f9fa;
        }
        .result {
            margin: 10px 0;
            padding: 15px;
            border-radius: 5px;
            border-left: 4px solid #007bff;
            background: #f8f9fa;
        }
        .result.success { border-left-color: #28a745; background: #d4edda; }
        .result.error { border-left-color: #dc3545; background: #f8d7da; }
        .result.warning { border-left-color: #ffc107; background: #fff3cd; }
        .result.info { border-left-color: #17a2b8; background: #d1ecf1; }
        
        button {
            background: linear-gradient(135deg, #007bff, #0056b3);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 8px;
            cursor: pointer;
            margin: 10px;
            font-size: 16px;
            transition: all 0.3s ease;
        }
        button:hover { 
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,123,255,0.3);
        }
        .btn-danger { background: linear-gradient(135deg, #dc3545, #c82333); }
        .btn-warning { background: linear-gradient(135deg, #ffc107, #e0a800); }
        .btn-success { background: linear-gradient(135deg, #28a745, #1e7e34); }
        
        .property-list {
            background: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 8px;
            padding: 15px;
            margin: 15px 0;
            max-height: 300px;
            overflow-y: auto;
        }
        .property-item {
            background: white;
            border: 1px solid #e9ecef;
            border-radius: 6px;
            padding: 10px;
            margin: 5px 0;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }
        .order-demo {
            background: #e3f2fd;
            border: 1px solid #2196f3;
            border-radius: 8px;
            padding: 15px;
            margin: 15px 0;
        }
    </style>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
    <div class="container">
        <div class="header">
            <h1><i class="fas fa-sort"></i> Ø§Ø®ØªØ¨Ø§Ø± Ù†Ø¸Ø§Ù… ØªØ±ØªÙŠØ¨ Ø§Ù„Ø¹Ù‚Ø§Ø±Ø§Øª Ø§Ù„Ø«Ø§Ø¨Øª</h1>
            <p>Ø§Ù„ØªØ£ÙƒØ¯ Ù…Ù† Ø£Ù† ØªØ±ØªÙŠØ¨ Ø§Ù„Ø¹Ù‚Ø§Ø±Ø§Øª ÙÙŠ Ø§Ù„Ù€ Sidebar ÙŠØ¨Ù‚Ù‰ Ø«Ø§Ø¨ØªØ§Ù‹</p>
        </div>

        <div class="order-demo">
            <h3><i class="fas fa-info-circle"></i> ÙƒÙŠÙ ÙŠØ¹Ù…Ù„ Ø§Ù„Ù†Ø¸Ø§Ù… Ø§Ù„Ø¬Ø¯ÙŠØ¯:</h3>
            <ul>
                <li>âœ… <strong>ØªØ±ØªÙŠØ¨ Ø«Ø§Ø¨Øª:</strong> Ø§Ù„Ø¹Ù‚Ø§Ø±Ø§Øª ØªØ­ØªÙØ¸ Ø¨ØªØ±ØªÙŠØ¨Ù‡Ø§ Ø­ØªÙ‰ Ù„Ùˆ ØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª</li>
                <li>âœ… <strong>ØªØ±ØªÙŠØ¨ Ù…Ù†ÙØµÙ„ Ù„ÙƒÙ„ Ù…Ø¯ÙŠÙ†Ø©:</strong> ÙƒÙ„ Ù…Ø¯ÙŠÙ†Ø© Ù„Ù‡Ø§ ØªØ±ØªÙŠØ¨ Ù…Ù†ÙØµÙ„</li>
                <li>âœ… <strong>Ø¥Ø¯Ø§Ø±Ø© Ø³Ù‡Ù„Ø©:</strong> Ø²Ø± Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„ØªØ±ØªÙŠØ¨ ÙÙŠ Ø§Ù„Ù€ Sidebar</li>
                <li>âœ… <strong>Ø³Ø­Ø¨ ÙˆØ¥ÙÙ„Ø§Øª:</strong> Ø¥Ø¹Ø§Ø¯Ø© ØªØ±ØªÙŠØ¨ Ø§Ù„Ø¹Ù‚Ø§Ø±Ø§Øª Ø¨Ø§Ù„Ø³Ø­Ø¨</li>
                <li>âœ… <strong>Ø­ÙØ¸ ØªÙ„Ù‚Ø§Ø¦ÙŠ:</strong> Ø§Ù„ØªØ±ØªÙŠØ¨ ÙŠÙØ­ÙØ¸ ÙÙŠ localStorage</li>
            </ul>
        </div>

        <div class="test-section">
            <h2><i class="fas fa-database"></i> Ø§Ø®ØªØ¨Ø§Ø± 1: Ø¥Ù†Ø´Ø§Ø¡ Ø¨ÙŠØ§Ù†Ø§Øª ØªØ¬Ø±ÙŠØ¨ÙŠØ©</h2>
            <p>Ø¥Ù†Ø´Ø§Ø¡ Ø¹Ù‚Ø§Ø±Ø§Øª ØªØ¬Ø±ÙŠØ¨ÙŠØ© Ù„Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ù†Ø¸Ø§Ù…</p>
            <button onclick="createTestData()" class="btn-success">
                <i class="fas fa-plus"></i> Ø¥Ù†Ø´Ø§Ø¡ Ø¨ÙŠØ§Ù†Ø§Øª ØªØ¬Ø±ÙŠØ¨ÙŠØ©
            </button>
            <div id="testDataResults"></div>
        </div>

        <div class="test-section">
            <h2><i class="fas fa-list"></i> Ø§Ø®ØªØ¨Ø§Ø± 2: Ø¹Ø±Ø¶ Ø§Ù„ØªØ±ØªÙŠØ¨ Ø§Ù„Ø­Ø§Ù„ÙŠ</h2>
            <p>Ø¹Ø±Ø¶ ØªØ±ØªÙŠØ¨ Ø§Ù„Ø¹Ù‚Ø§Ø±Ø§Øª ÙÙŠ Ø§Ù„Ù…Ø¯Ù† Ø§Ù„Ù…Ø®ØªÙ„ÙØ©</p>
            <button onclick="showCurrentOrder()" class="btn-warning">
                <i class="fas fa-eye"></i> Ø¹Ø±Ø¶ Ø§Ù„ØªØ±ØªÙŠØ¨ Ø§Ù„Ø­Ø§Ù„ÙŠ
            </button>
            <div id="currentOrderResults"></div>
        </div>

        <div class="test-section">
            <h2><i class="fas fa-random"></i> Ø§Ø®ØªØ¨Ø§Ø± 3: ØªØºÙŠÙŠØ± Ø§Ù„ØªØ±ØªÙŠØ¨</h2>
            <p>Ø§Ø®ØªØ¨Ø§Ø± ØªØºÙŠÙŠØ± ØªØ±ØªÙŠØ¨ Ø§Ù„Ø¹Ù‚Ø§Ø±Ø§Øª ÙˆØ­ÙØ¸Ù‡</p>
            <button onclick="testReorder()" class="btn-warning">
                <i class="fas fa-random"></i> Ø§Ø®ØªØ¨Ø§Ø± Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„ØªØ±ØªÙŠØ¨
            </button>
            <div id="reorderResults"></div>
        </div>

        <div class="test-section">
            <h2><i class="fas fa-sync"></i> Ø§Ø®ØªØ¨Ø§Ø± 4: Ù…Ø­Ø§ÙƒØ§Ø© ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª</h2>
            <p>Ù…Ø­Ø§ÙƒØ§Ø© ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ÙˆØ§Ù„ØªØ£ÙƒØ¯ Ù…Ù† Ø«Ø¨Ø§Øª Ø§Ù„ØªØ±ØªÙŠØ¨</p>
            <button onclick="simulateDataUpdate()" class="btn-warning">
                <i class="fas fa-sync"></i> Ù…Ø­Ø§ÙƒØ§Ø© ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
            </button>
            <div id="updateResults"></div>
        </div>

        <div class="test-section">
            <h2><i class="fas fa-undo"></i> Ø§Ø®ØªØ¨Ø§Ø± 5: Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø§Ù„ØªØ±ØªÙŠØ¨</h2>
            <p>Ø§Ø®ØªØ¨Ø§Ø± Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø§Ù„ØªØ±ØªÙŠØ¨ Ù„Ù„Ø­Ø§Ù„Ø© Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠØ©</p>
            <button onclick="testReset()" class="btn-danger">
                <i class="fas fa-undo"></i> Ø§Ø®ØªØ¨Ø§Ø± Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„ØªØ¹ÙŠÙŠÙ†
            </button>
            <div id="resetResults"></div>
        </div>

        <div class="test-section">
            <h2><i class="fas fa-file-alt"></i> ØªÙ‚Ø±ÙŠØ± Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ</h2>
            <button onclick="generateFinalReport()" class="btn-success">
                <i class="fas fa-file-alt"></i> Ø¥Ù†Ø´Ø§Ø¡ ØªÙ‚Ø±ÙŠØ± Ø´Ø§Ù…Ù„
            </button>
            <div id="finalReport"></div>
        </div>
    </div>

    <script>
        // Ù…ØªØºÙŠØ±Ø§Øª Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±
        let testResults = {
            createData: null,
            showOrder: null,
            reorder: null,
            update: null,
            reset: null
        };

        // Ø¨ÙŠØ§Ù†Ø§Øª ØªØ¬Ø±ÙŠØ¨ÙŠØ©
        const testProperties = [
            { name: 'Ø¹Ù‚Ø§Ø± Ø§Ù„Ø£Ù…Ù„', city: 'Ø§Ù„Ø±ÙŠØ§Ø¶' },
            { name: 'Ø¨Ø±Ø¬ Ø§Ù„Ù†ÙˆØ±', city: 'Ø§Ù„Ø±ÙŠØ§Ø¶' },
            { name: 'Ù…Ø¬Ù…Ø¹ Ø§Ù„ÙØ±Ø¯ÙˆØ³', city: 'Ø§Ù„Ø±ÙŠØ§Ø¶' },
            { name: 'Ø¹Ù‚Ø§Ø± Ø§Ù„Ø®Ù„ÙŠØ¬', city: 'Ø¬Ø¯Ø©' },
            { name: 'Ø¨Ø±Ø¬ Ø§Ù„Ø¨Ø­Ø±', city: 'Ø¬Ø¯Ø©' },
            { name: 'Ù…Ø¬Ù…Ø¹ Ø§Ù„Ø³Ø§Ø­Ù„', city: 'Ø¬Ø¯Ø©' },
            { name: 'Ø¹Ù‚Ø§Ø± Ø§Ù„Ø¬Ø¨Ù„', city: 'Ø§Ù„Ø·Ø§Ø¦Ù' },
            { name: 'Ø¨Ø±Ø¬ Ø§Ù„ÙˆØ±Ø¯', city: 'Ø§Ù„Ø·Ø§Ø¦Ù' }
        ];

        function addResult(containerId, type, title, content) {
            const container = document.getElementById(containerId);
            const resultDiv = document.createElement('div');
            resultDiv.className = `result ${type}`;
            resultDiv.innerHTML = `
                <strong><i class="fas fa-${getIcon(type)}"></i> ${title}</strong><br>
                ${content}
            `;
            container.appendChild(resultDiv);
            container.scrollTop = container.scrollHeight;
        }

        function getIcon(type) {
            switch(type) {
                case 'success': return 'check-circle';
                case 'error': return 'times-circle';
                case 'warning': return 'exclamation-triangle';
                case 'info': return 'info-circle';
                default: return 'circle';
            }
        }

        // Ø§Ø®ØªØ¨Ø§Ø± 1: Ø¥Ù†Ø´Ø§Ø¡ Ø¨ÙŠØ§Ù†Ø§Øª ØªØ¬Ø±ÙŠØ¨ÙŠØ©
        function createTestData() {
            addResult('testDataResults', 'info', 'Ø¨Ø¯Ø¡ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ØªØ¬Ø±ÙŠØ¨ÙŠØ©', 'Ø¬Ø§Ø±ÙŠ Ø¥Ù†Ø´Ø§Ø¡ Ø¹Ù‚Ø§Ø±Ø§Øª ØªØ¬Ø±ÙŠØ¨ÙŠØ©...');
            
            try {
                // Ù…Ø­Ø§ÙƒØ§Ø© Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
                const mockProperties = testProperties.map(prop => ({
                    'Ø§Ø³Ù… Ø§Ù„Ø¹Ù‚Ø§Ø±': prop.name,
                    'Ø§Ù„Ù…Ø¯ÙŠÙ†Ø©': prop.city,
                    'Ø±Ù‚Ù…  Ø§Ù„ÙˆØ­Ø¯Ø© ': 'ÙˆØ­Ø¯Ø© Ø£Ø³Ø§Ø³ÙŠØ©',
                    'Ø§Ù„Ù…Ø§Ù„Ùƒ': 'Ù…Ø§Ù„Ùƒ ØªØ¬Ø±ÙŠØ¨ÙŠ',
                    'Ù†ÙˆØ¹ Ø§Ù„Ø¹Ù‚Ø¯': 'Ø³ÙƒÙ†ÙŠ'
                }));

                // Ø­ÙØ¸ ÙÙŠ localStorage Ù„Ù„Ø§Ø®ØªØ¨Ø§Ø±
                localStorage.setItem('testProperties', JSON.stringify(mockProperties));
                
                addResult('testDataResults', 'success', 'ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¨Ù†Ø¬Ø§Ø­', 
                    `ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ ${testProperties.length} Ø¹Ù‚Ø§Ø± ÙÙŠ ${new Set(testProperties.map(p => p.city)).size} Ù…Ø¯Ù†`);
                
                // Ø¹Ø±Ø¶ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
                let html = '<div class="property-list"><h4>Ø§Ù„Ø¹Ù‚Ø§Ø±Ø§Øª Ø§Ù„Ù…Ù†Ø´Ø£Ø©:</h4>';
                testProperties.forEach((prop, index) => {
                    html += `
                        <div class="property-item">
                            <span>${index + 1}. ${prop.name}</span>
                            <span style="color: #666;">${prop.city}</span>
                        </div>
                    `;
                });
                html += '</div>';
                
                addResult('testDataResults', 'info', 'Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø¹Ù‚Ø§Ø±Ø§Øª', html);
                testResults.createData = true;
                
            } catch (error) {
                addResult('testDataResults', 'error', 'Ø®Ø·Ø£ ÙÙŠ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª', 
                    `Ø®Ø·Ø£: ${error.message}`);
                testResults.createData = false;
            }
        }

        // Ø§Ø®ØªØ¨Ø§Ø± 2: Ø¹Ø±Ø¶ Ø§Ù„ØªØ±ØªÙŠØ¨ Ø§Ù„Ø­Ø§Ù„ÙŠ
        function showCurrentOrder() {
            addResult('currentOrderResults', 'info', 'Ø¨Ø¯Ø¡ Ø¹Ø±Ø¶ Ø§Ù„ØªØ±ØªÙŠØ¨', 'Ø¬Ø§Ø±ÙŠ ÙØ­Øµ Ø§Ù„ØªØ±ØªÙŠØ¨ Ø§Ù„Ù…Ø­ÙÙˆØ¸...');
            
            try {
                // Ù‚Ø±Ø§Ø¡Ø© Ø§Ù„ØªØ±ØªÙŠØ¨ Ø§Ù„Ù…Ø­ÙÙˆØ¸
                const savedOrder = JSON.parse(localStorage.getItem('fixedPropertyOrder') || '{}');
                
                addResult('currentOrderResults', 'info', 'Ø§Ù„ØªØ±ØªÙŠØ¨ Ø§Ù„Ù…Ø­ÙÙˆØ¸', 
                    `Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ø¯Ù† Ø§Ù„Ù…Ø­ÙÙˆØ¸Ø©: ${Object.keys(savedOrder).length}`);
                
                // Ø¹Ø±Ø¶ ØªØ±ØªÙŠØ¨ ÙƒÙ„ Ù…Ø¯ÙŠÙ†Ø©
                let html = '<div class="property-list">';
                Object.keys(savedOrder).forEach(city => {
                    html += `<h4>${city}:</h4>`;
                    savedOrder[city].forEach((property, index) => {
                        html += `
                            <div class="property-item">
                                <span>${index + 1}. ${property}</span>
                                <i class="fas fa-building" style="color: #007bff;"></i>
                            </div>
                        `;
                    });
                });
                html += '</div>';
                
                if (Object.keys(savedOrder).length > 0) {
                    addResult('currentOrderResults', 'success', 'Ø§Ù„ØªØ±ØªÙŠØ¨ Ø§Ù„Ù…Ø­ÙÙˆØ¸', html);
                } else {
                    addResult('currentOrderResults', 'warning', 'Ù„Ø§ ÙŠÙˆØ¬Ø¯ ØªØ±ØªÙŠØ¨ Ù…Ø­ÙÙˆØ¸', 
                        'Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ ØªØ±ØªÙŠØ¨ Ù…Ø­ÙÙˆØ¸. Ù‚Ù… Ø¨Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ØªØ¬Ø±ÙŠØ¨ÙŠØ© Ø£ÙˆÙ„Ø§Ù‹.');
                }
                
                testResults.showOrder = true;
                
            } catch (error) {
                addResult('currentOrderResults', 'error', 'Ø®Ø·Ø£ ÙÙŠ Ø¹Ø±Ø¶ Ø§Ù„ØªØ±ØªÙŠØ¨',
                    `Ø®Ø·Ø£: ${error.message}`);
                testResults.showOrder = false;
            }
        }

        // Ø§Ø®ØªØ¨Ø§Ø± 3: ØªØºÙŠÙŠØ± Ø§Ù„ØªØ±ØªÙŠØ¨
        function testReorder() {
            addResult('reorderResults', 'info', 'Ø¨Ø¯Ø¡ Ø§Ø®ØªØ¨Ø§Ø± Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„ØªØ±ØªÙŠØ¨', 'Ø¬Ø§Ø±ÙŠ Ø§Ø®ØªØ¨Ø§Ø± ØªØºÙŠÙŠØ± ØªØ±ØªÙŠØ¨ Ø§Ù„Ø¹Ù‚Ø§Ø±Ø§Øª...');

            try {
                // Ù…Ø­Ø§ÙƒØ§Ø© ØªØ±ØªÙŠØ¨ Ø¬Ø¯ÙŠØ¯ Ù„Ù„Ø±ÙŠØ§Ø¶
                const newRiyadhOrder = ['Ù…Ø¬Ù…Ø¹ Ø§Ù„ÙØ±Ø¯ÙˆØ³', 'Ø¹Ù‚Ø§Ø± Ø§Ù„Ø£Ù…Ù„', 'Ø¨Ø±Ø¬ Ø§Ù„Ù†ÙˆØ±'];
                const newJeddahOrder = ['Ø¨Ø±Ø¬ Ø§Ù„Ø¨Ø­Ø±', 'Ø¹Ù‚Ø§Ø± Ø§Ù„Ø®Ù„ÙŠØ¬', 'Ù…Ø¬Ù…Ø¹ Ø§Ù„Ø³Ø§Ø­Ù„'];

                // Ø­ÙØ¸ Ø§Ù„ØªØ±ØªÙŠØ¨ Ø§Ù„Ø¬Ø¯ÙŠØ¯
                const fixedOrder = JSON.parse(localStorage.getItem('fixedPropertyOrder') || '{}');
                fixedOrder['Ø§Ù„Ø±ÙŠØ§Ø¶'] = newRiyadhOrder;
                fixedOrder['Ø¬Ø¯Ø©'] = newJeddahOrder;
                localStorage.setItem('fixedPropertyOrder', JSON.stringify(fixedOrder));

                addResult('reorderResults', 'success', 'ØªÙ… ØªØºÙŠÙŠØ± Ø§Ù„ØªØ±ØªÙŠØ¨ Ø¨Ù†Ø¬Ø§Ø­',
                    'ØªÙ… ØªØ·Ø¨ÙŠÙ‚ ØªØ±ØªÙŠØ¨ Ø¬Ø¯ÙŠØ¯ Ù„Ù„Ø±ÙŠØ§Ø¶ ÙˆØ¬Ø¯Ø©');

                // Ø¹Ø±Ø¶ Ø§Ù„ØªØ±ØªÙŠØ¨ Ø§Ù„Ø¬Ø¯ÙŠØ¯
                let html = '<div class="property-list">';
                html += '<h4>Ø§Ù„ØªØ±ØªÙŠØ¨ Ø§Ù„Ø¬Ø¯ÙŠØ¯ Ù„Ù„Ø±ÙŠØ§Ø¶:</h4>';
                newRiyadhOrder.forEach((property, index) => {
                    html += `
                        <div class="property-item">
                            <span>${index + 1}. ${property}</span>
                            <i class="fas fa-arrow-up" style="color: #28a745;"></i>
                        </div>
                    `;
                });
                html += '<h4>Ø§Ù„ØªØ±ØªÙŠØ¨ Ø§Ù„Ø¬Ø¯ÙŠØ¯ Ù„Ø¬Ø¯Ø©:</h4>';
                newJeddahOrder.forEach((property, index) => {
                    html += `
                        <div class="property-item">
                            <span>${index + 1}. ${property}</span>
                            <i class="fas fa-arrow-up" style="color: #28a745;"></i>
                        </div>
                    `;
                });
                html += '</div>';

                addResult('reorderResults', 'info', 'Ø§Ù„ØªØ±ØªÙŠØ¨ Ø§Ù„Ø¬Ø¯ÙŠØ¯', html);
                testResults.reorder = true;

            } catch (error) {
                addResult('reorderResults', 'error', 'Ø®Ø·Ø£ ÙÙŠ Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„ØªØ±ØªÙŠØ¨',
                    `Ø®Ø·Ø£: ${error.message}`);
                testResults.reorder = false;
            }
        }

        // Ø§Ø®ØªØ¨Ø§Ø± 4: Ù…Ø­Ø§ÙƒØ§Ø© ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
        function simulateDataUpdate() {
            addResult('updateResults', 'info', 'Ø¨Ø¯Ø¡ Ù…Ø­Ø§ÙƒØ§Ø© Ø§Ù„ØªØ­Ø¯ÙŠØ«', 'Ø¬Ø§Ø±ÙŠ Ù…Ø­Ø§ÙƒØ§Ø© ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª...');

            try {
                // Ù‚Ø±Ø§Ø¡Ø© Ø§Ù„ØªØ±ØªÙŠØ¨ Ù‚Ø¨Ù„ Ø§Ù„ØªØ­Ø¯ÙŠØ«
                const orderBefore = JSON.parse(localStorage.getItem('fixedPropertyOrder') || '{}');

                // Ù…Ø­Ø§ÙƒØ§Ø© Ø¥Ø¶Ø§ÙØ© Ø¹Ù‚Ø§Ø± Ø¬Ø¯ÙŠØ¯
                const newProperty = { name: 'Ø¹Ù‚Ø§Ø± Ø¬Ø¯ÙŠØ¯', city: 'Ø§Ù„Ø±ÙŠØ§Ø¶' };

                // Ù…Ø­Ø§ÙƒØ§Ø© Ø¯Ø§Ù„Ø© applySortedPropertyOrder
                const riyadhProperties = ['Ø¹Ù‚Ø§Ø± Ø§Ù„Ø£Ù…Ù„', 'Ø¨Ø±Ø¬ Ø§Ù„Ù†ÙˆØ±', 'Ù…Ø¬Ù…Ø¹ Ø§Ù„ÙØ±Ø¯ÙˆØ³', 'Ø¹Ù‚Ø§Ø± Ø¬Ø¯ÙŠØ¯'];
                const savedRiyadhOrder = orderBefore['Ø§Ù„Ø±ÙŠØ§Ø¶'] || [];

                // ÙØµÙ„ Ø§Ù„Ø¹Ù‚Ø§Ø±Ø§Øª Ø§Ù„Ù…ÙˆØ¬ÙˆØ¯Ø© Ø¹Ù† Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©
                const existingProperties = riyadhProperties.filter(prop => savedRiyadhOrder.includes(prop));
                const newProperties = riyadhProperties.filter(prop => !savedRiyadhOrder.includes(prop));

                // ØªØ±ØªÙŠØ¨ Ø§Ù„Ø¹Ù‚Ø§Ø±Ø§Øª Ø§Ù„Ù…ÙˆØ¬ÙˆØ¯Ø© Ø­Ø³Ø¨ Ø§Ù„ØªØ±ØªÙŠØ¨ Ø§Ù„Ù…Ø­ÙÙˆØ¸
                existingProperties.sort((a, b) => {
                    const indexA = savedRiyadhOrder.indexOf(a);
                    const indexB = savedRiyadhOrder.indexOf(b);
                    return indexA - indexB;
                });

                // Ø¯Ù…Ø¬ Ø§Ù„Ù‚ÙˆØ§Ø¦Ù…
                const finalOrder = [...existingProperties, ...newProperties.sort()];

                addResult('updateResults', 'success', 'ØªÙ… Ø§Ù„Ø­ÙØ§Ø¸ Ø¹Ù„Ù‰ Ø§Ù„ØªØ±ØªÙŠØ¨',
                    'Ø§Ù„ØªØ±ØªÙŠØ¨ Ø§Ù„Ù…Ø­ÙÙˆØ¸ Ù„Ù… ÙŠØªØºÙŠØ± Ø±ØºÙ… Ø¥Ø¶Ø§ÙØ© Ø¹Ù‚Ø§Ø± Ø¬Ø¯ÙŠØ¯');

                // Ø¹Ø±Ø¶ Ø§Ù„Ù†ØªÙŠØ¬Ø©
                let html = '<div class="property-list">';
                html += '<h4>Ø§Ù„ØªØ±ØªÙŠØ¨ Ø¨Ø¹Ø¯ Ø¥Ø¶Ø§ÙØ© Ø¹Ù‚Ø§Ø± Ø¬Ø¯ÙŠØ¯:</h4>';
                finalOrder.forEach((property, index) => {
                    const isNew = newProperties.includes(property);
                    html += `
                        <div class="property-item">
                            <span>${index + 1}. ${property}</span>
                            ${isNew ? '<span style="color: #28a745; font-weight: bold;">Ø¬Ø¯ÙŠØ¯</span>' : '<i class="fas fa-check" style="color: #007bff;"></i>'}
                        </div>
                    `;
                });
                html += '</div>';

                addResult('updateResults', 'info', 'Ø§Ù„Ù†ØªÙŠØ¬Ø© Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØ©', html);
                testResults.update = true;

            } catch (error) {
                addResult('updateResults', 'error', 'Ø®Ø·Ø£ ÙÙŠ Ù…Ø­Ø§ÙƒØ§Ø© Ø§Ù„ØªØ­Ø¯ÙŠØ«',
                    `Ø®Ø·Ø£: ${error.message}`);
                testResults.update = false;
            }
        }

        // Ø§Ø®ØªØ¨Ø§Ø± 5: Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø§Ù„ØªØ±ØªÙŠØ¨
        function testReset() {
            addResult('resetResults', 'info', 'Ø¨Ø¯Ø¡ Ø§Ø®ØªØ¨Ø§Ø± Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„ØªØ¹ÙŠÙŠÙ†', 'Ø¬Ø§Ø±ÙŠ Ø§Ø®ØªØ¨Ø§Ø± Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø§Ù„ØªØ±ØªÙŠØ¨...');

            try {
                // Ø­ÙØ¸ Ù†Ø³Ø®Ø© Ø§Ø­ØªÙŠØ§Ø·ÙŠØ©
                const backupOrder = localStorage.getItem('fixedPropertyOrder');

                // Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø§Ù„ØªØ±ØªÙŠØ¨
                localStorage.removeItem('fixedPropertyOrder');

                addResult('resetResults', 'success', 'ØªÙ… Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„ØªØ¹ÙŠÙŠÙ† Ø¨Ù†Ø¬Ø§Ø­',
                    'ØªÙ… Ø­Ø°Ù Ø¬Ù…ÙŠØ¹ Ø§Ù„ØªØ±ØªÙŠØ¨Ø§Øª Ø§Ù„Ù…Ø­ÙÙˆØ¸Ø©');

                // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø­Ø°Ù
                const currentOrder = localStorage.getItem('fixedPropertyOrder');
                if (!currentOrder) {
                    addResult('resetResults', 'success', 'ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø­Ø°Ù',
                        'ØªÙ… Ø§Ù„ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø­ÙÙˆØ¸Ø©');
                } else {
                    addResult('resetResults', 'warning', 'Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø­Ø°Ù Ø¨Ø§Ù„ÙƒØ§Ù…Ù„',
                        'Ù…Ø§ Ø²Ø§Ù„Øª Ù‡Ù†Ø§Ùƒ Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ø­ÙÙˆØ¸Ø©');
                }

                // Ø§Ø³ØªØ¹Ø§Ø¯Ø© Ø§Ù„Ù†Ø³Ø®Ø© Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠØ© Ù„Ù„Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª Ø§Ù„Ø£Ø®Ø±Ù‰
                if (backupOrder) {
                    localStorage.setItem('fixedPropertyOrder', backupOrder);
                    addResult('resetResults', 'info', 'Ø§Ø³ØªØ¹Ø§Ø¯Ø© Ø§Ù„Ù†Ø³Ø®Ø© Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠØ©',
                        'ØªÙ… Ø§Ø³ØªØ¹Ø§Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù„Ù„Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª Ø§Ù„Ø£Ø®Ø±Ù‰');
                }

                testResults.reset = true;

            } catch (error) {
                addResult('resetResults', 'error', 'Ø®Ø·Ø£ ÙÙŠ Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„ØªØ¹ÙŠÙŠÙ†',
                    `Ø®Ø·Ø£: ${error.message}`);
                testResults.reset = false;
            }
        }

        // Ø¥Ù†Ø´Ø§Ø¡ ØªÙ‚Ø±ÙŠØ± Ù†Ù‡Ø§Ø¦ÙŠ
        function generateFinalReport() {
            addResult('finalReport', 'info', 'Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„ØªÙ‚Ø±ÙŠØ± Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ', 'Ø¬Ø§Ø±ÙŠ ØªØ¬Ù…ÙŠØ¹ Ù†ØªØ§Ø¦Ø¬ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª...');

            let reportHtml = '<div style="background: #e3f2fd; border: 1px solid #2196f3; border-radius: 8px; padding: 15px; margin: 15px 0;">';
            reportHtml += '<h4><i class="fas fa-chart-bar"></i> ØªÙ‚Ø±ÙŠØ± Ø§Ø®ØªØ¨Ø§Ø± Ù†Ø¸Ø§Ù… ØªØ±ØªÙŠØ¨ Ø§Ù„Ø¹Ù‚Ø§Ø±Ø§Øª Ø§Ù„Ø«Ø§Ø¨Øª</h4>';

            // Ù…Ù„Ø®Øµ Ø§Ù„Ù†ØªØ§Ø¦Ø¬
            const tests = [
                { name: 'Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ØªØ¬Ø±ÙŠØ¨ÙŠØ©', result: testResults.createData },
                { name: 'Ø¹Ø±Ø¶ Ø§Ù„ØªØ±ØªÙŠØ¨ Ø§Ù„Ø­Ø§Ù„ÙŠ', result: testResults.showOrder },
                { name: 'ØªØºÙŠÙŠØ± Ø§Ù„ØªØ±ØªÙŠØ¨', result: testResults.reorder },
                { name: 'Ù…Ø­Ø§ÙƒØ§Ø© ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª', result: testResults.update },
                { name: 'Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø§Ù„ØªØ±ØªÙŠØ¨', result: testResults.reset }
            ];

            let passedTests = 0;
            let totalTests = 0;

            reportHtml += '<h5>Ù†ØªØ§Ø¦Ø¬ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª:</h5><ul>';
            tests.forEach(test => {
                if (test.result !== null) {
                    totalTests++;
                    if (test.result === true) {
                        passedTests++;
                        reportHtml += `<li style="color: #28a745;">âœ… ${test.name}: Ù†Ø¬Ø­</li>`;
                    } else {
                        reportHtml += `<li style="color: #dc3545;">âŒ ${test.name}: ÙØ´Ù„</li>`;
                    }
                } else {
                    reportHtml += `<li style="color: #6c757d;">â– ${test.name}: Ù„Ù… ÙŠØªÙ… ØªØ´ØºÙŠÙ„Ù‡</li>`;
                }
            });
            reportHtml += '</ul>';

            // Ø§Ù„ØªÙˆØµÙŠØ§Øª
            reportHtml += '<h5>Ø§Ù„ØªÙˆØµÙŠØ§Øª:</h5>';
            if (passedTests === totalTests) {
                reportHtml += '<p style="color: #28a745;">ğŸ‰ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª Ù†Ø¬Ø­Øª! Ù†Ø¸Ø§Ù… Ø§Ù„ØªØ±ØªÙŠØ¨ Ø§Ù„Ø«Ø§Ø¨Øª ÙŠØ¹Ù…Ù„ Ø¨Ø´ÙƒÙ„ Ù…Ù…ØªØ§Ø².</p>';
                reportHtml += '<p><strong>âœ… Ø§Ù„Ù…Ù…ÙŠØ²Ø§Øª Ø§Ù„Ù…Ø¤ÙƒØ¯Ø©:</strong></p>';
                reportHtml += '<ul>';
                reportHtml += '<li>âœ… Ø§Ù„ØªØ±ØªÙŠØ¨ ÙŠØ¨Ù‚Ù‰ Ø«Ø§Ø¨ØªØ§Ù‹ Ø¹Ù†Ø¯ Ø§Ù„ØªØ­Ø¯ÙŠØ«Ø§Øª</li>';
                reportHtml += '<li>âœ… ØªØ±ØªÙŠØ¨ Ù…Ù†ÙØµÙ„ Ù„ÙƒÙ„ Ù…Ø¯ÙŠÙ†Ø©</li>';
                reportHtml += '<li>âœ… Ø§Ù„Ø¹Ù‚Ø§Ø±Ø§Øª Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø© ØªÙØ¶Ø§Ù ÙÙŠ Ø§Ù„Ù†Ù‡Ø§ÙŠØ©</li>';
                reportHtml += '<li>âœ… Ø¥Ù…ÙƒØ§Ù†ÙŠØ© Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø§Ù„ØªØ±ØªÙŠØ¨</li>';
                reportHtml += '</ul>';
            } else {
                reportHtml += '<p style="color: #ffc107;">âš ï¸ Ø¨Ø¹Ø¶ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª ØªØ­ØªØ§Ø¬ ØªØ­Ø³ÙŠÙ†</p>';
            }

            reportHtml += '</div>';

            const reportType = passedTests === totalTests ? 'success' : 'warning';
            addResult('finalReport', reportType, `Ø§ÙƒØªÙ…Ù„ Ø§Ù„ØªÙ‚Ø±ÙŠØ± (${passedTests}/${totalTests})`, reportHtml);
        }

        // ØªØ´ØºÙŠÙ„ ØªÙ„Ù‚Ø§Ø¦ÙŠ Ø¹Ù†Ø¯ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø©
        window.addEventListener('load', () => {
            addResult('testDataResults', 'info', 'ğŸš€ Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨Ùƒ ÙÙŠ Ø§Ø®ØªØ¨Ø§Ø± Ù†Ø¸Ø§Ù… Ø§Ù„ØªØ±ØªÙŠØ¨ Ø§Ù„Ø«Ø§Ø¨Øª',
                'Ø§Ø¶ØºØ· Ø¹Ù„Ù‰ Ø§Ù„Ø£Ø²Ø±Ø§Ø± Ø£Ø¹Ù„Ø§Ù‡ Ù„ØªØ´ØºÙŠÙ„ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª Ø§Ù„Ù…Ø®ØªÙ„ÙØ©');
        });
    </script>
</body>
</html>
