# ุฏููู ุฅุตูุงุญ ูุดุงูู ุงูุฃูุณุงุท - Installments Fix Guide

## ๐ง ุงููุดุงูู ุงูุชู ุชู ุฅุตูุงุญูุง

### ุงููุดููุฉ 1: ุงุฎุชูุงุก ูุจุงูุบ ุงูุฃูุณุงุท ูู ุงูุฅุฌูุงูู
**ุงููุตู:** ูุงูุช ูุจุงูุบ ุงูุฃูุณุงุท ุชุธูุฑ ูุคูุชุงู ุซู ุชุฎุชูู ูู ุงูุฅุฌูุงูู ุจุนุฏ ุฅุนุงุฏุฉ ุชุญููู ุงูุตูุญุฉ.

**ุงูุณุจุจ:** ุนุฏู ุญูุธ ุงูุจูุงูุงุช ุชููุงุฆูุงู ุจุนุฏ ุชุนุฏูู ุงูุฃูุณุงุท.

**ุงูุญู ุงููุทุจู:**
- โ ุฅุถุงูุฉ ุญูุธ ุชููุงุฆู ุนูุฏ ุชุบููุฑ ููู ุงูุฃูุณุงุท
- โ ุญูุธ ูู localStorage ููุณุฎุฉ ุงุญุชูุงุทูุฉ
- โ ุญูุธ ูู Supabase ุฅุฐุง ูุงู ูุชููุฑุงู
- โ ุฅุนุงุฏุฉ ุญุณุงุจ ุงูุฅุฌูุงูู ููุฑุงู ุจุนุฏ ุงูุชุนุฏูู

### ุงููุดููุฉ 2: ุชุบููุฑ ุชูุงุฑูุฎ ุงูุฃูุณุงุท ุฅูู ุชูุงุฑูุฎ ุนุดูุงุฆูุฉ
**ุงููุตู:** ูุงูุช ุชูุงุฑูุฎ ุงูุฃูุณุงุท ุชุชุบูุฑ ุฅูู ุชูุงุฑูุฎ ูุฎุชููุฉ ุนู ุงูุชู ุฃุฏุฎููุง ุงููุณุชุฎุฏู.

**ุงูุณุจุจ:** ุชุญููู ุฎุงุทุฆ ูุตูุบุฉ ุงูุชุงุฑูุฎ ูู ูุธููุฉ `savePropertyEdit`.

**ุงูุญู ุงููุทุจู:**
- โ ูุนุงูุฌุฉ ุฎุงุตุฉ ูุชูุงุฑูุฎ ุงูุฃูุณุงุท
- โ ุงูุญูุงุธ ุนูู ุงูุตูุบุฉ ุงูุฃุตููุฉ ููุชุงุฑูุฎ
- โ ุชุญููู ุตุญูุญ ูู `yyyy-mm-dd` ุฅูู `dd/mm/yyyy`

## ๐๏ธ ุงูุชุญุณููุงุช ุงููุถุงูุฉ

### 1. ุงูุญูุธ ุงูุชููุงุฆู
```javascript
// ุญูุธ ุชููุงุฆู ุนูุฏ ุชุบููุฑ ููู ุงูุฃูุณุงุท
function autoSaveInstallmentChanges() {
    // ุงูุจุญุซ ุนู ุงููููุฐุฌ ุงููุดุท
    // ุชุญุฏูุซ ุจูุงูุงุช ุงูุฃูุณุงุท
    // ุญุณุงุจ ุงูุฅุฌูุงูู ุงูุฌุฏูุฏ
    // ุญูุธ ูู Supabase ู localStorage
}
```

### 2. ุนุฑุถ ุงูุฅุฌูุงูู ุงููุจุงุดุฑ
- โ ุนุฑุถ ุงูุฅุฌูุงูู ูู ูููุฐุฌ ุงูุชุญุฑูุฑ
- โ ุชุญุฏูุซ ููุฑู ุนูุฏ ุชุบููุฑ ุงูุฃูุณุงุท
- โ ุนุฑุถ ุนุฏุฏ ุงูุฃูุณุงุท ูุน ุงููุจูุบ

### 3. ุงุณุชุนุงุฏุฉ ุงูุจูุงูุงุช
```javascript
// ุงุณุชุนุงุฏุฉ ุงูุจูุงูุงุช ูู localStorage ุนูุฏ ุงูุชุญููู
function restoreDataFromLocalStorage() {
    const savedData = localStorage.getItem('properties_backup');
    if (savedData) {
        properties = JSON.parse(savedData);
    }
}
```

### 4. ุญูุธ ูุญูู ูุญุณู
```javascript
// ุญูุธ ุงูุจูุงูุงุช ูุญููุงู ูุน ูุณุฎุฉ ุงุญุชูุงุทูุฉ
function saveDataLocally() {
    localStorage.setItem('properties_backup', JSON.stringify(properties));
}
```

## ๐ ุงููููุงุช ุงููุญุฏุซุฉ

### script.js - ุงูุชุญุฏูุซุงุช ุงูุฑุฆูุณูุฉ:

#### 1. ูุธููุฉ savePropertyEdit (ุงูุณุทุฑ 4411-4428)
```javascript
// ูุนุงูุฌุฉ ุฎุงุตุฉ ูุชูุงุฑูุฎ ุงูุฃูุณุงุท
if (key.includes('ุงููุณุท') && key.includes('ุชุงุฑูุฎ') && value) {
    const dateParts = value.split('-');
    if (dateParts.length === 3 && dateParts[0].length === 4) {
        value = `${dateParts[2]}/${dateParts[1]}/${dateParts[0]}`;
    }
}
```

#### 2. ูุธููุฉ autoSaveInstallmentChanges (ุงูุณุทุฑ 4863-4945)
```javascript
// ุญูุธ ุชููุงุฆู ูุชุบููุฑุงุช ุงูุฃูุณุงุท
function autoSaveInstallmentChanges() {
    // ุชุญุฏูุซ ุจูุงูุงุช ุงูุฃูุณุงุท ููุท
    // ุญุณุงุจ ุงูุฅุฌูุงูู ุงูุฌุฏูุฏ
    // ุญูุธ ูู Supabase ู localStorage
}
```

#### 3. ุฅุถุงูุฉ ูุณุชูุนูู ููุฃุญุฏุงุซ (ุงูุณุทุฑ 4719-4740)
```javascript
// ุฅุถุงูุฉ ุญูุธ ุชููุงุฆู ููุญููู
onchange="setTimeout(() => autoSaveInstallmentChanges(), 1000)"
```

#### 4. ุนุฑุถ ุงูุฅุฌูุงูู ูู ุงููููุฐุฌ (ุงูุณุทุฑ 4264-4281)
```javascript
// ุนุฑุถ ุงูุฅุฌูุงูู ุงููุจุงุดุฑ
<div class="total-display">
    ุงูุฅุฌูุงูู: ${yearlyData.total.toLocaleString()} ุฑูุงู (${yearlyData.count} ุฃูุณุงุท)
</div>
```

## ๐ฏ ููููุฉ ุงูุงุณุชุฎุฏุงู ุงูุขู

### ุฅุถุงูุฉ/ุชุนุฏูู ุงูุฃูุณุงุท:
1. **ุงูุชุญ ูููุฐุฌ ุชุญุฑูุฑ ุงูุนูุงุฑ**
2. **ุงุฐูุจ ุฅูู ูุณู "ุฅุฏุงุฑุฉ ุงูุฃูุณุงุท"**
3. **ุฃุฏุฎู ุชุงุฑูุฎ ููุจูุบ ุงููุณุท**
4. **ุณูุชู ุงูุญูุธ ุชููุงุฆูุงู ุฎูุงู ุซุงููุฉ ูุงุญุฏุฉ**
5. **ุณูุธูุฑ ุงูุฅุฌูุงูู ุงููุญุฏุซ ููุฑุงู**

### ุงูุชุญูู ูู ุงููุฌุงุญ:
- โ ุธููุฑ ุงูุฅุฌูุงูู ุงูุตุญูุญ ูู ุงููููุฐุฌ
- โ ุญูุธ ุงูุชูุงุฑูุฎ ููุง ุฃุฏุฎูุชูุง
- โ ุงุณุชูุฑุงุฑ ุงูุจูุงูุงุช ุจุนุฏ ุฅุนุงุฏุฉ ุงูุชุญููู
- โ ุฑุณุงูุฉ "ุชู ุญูุธ ุชุบููุฑุงุช ุงูุฃูุณุงุท ุชููุงุฆูุงู" ูู console

## ๐ ุงุณุชูุดุงู ุงูุฃุฎุทุงุก

### ุฅุฐุง ูู ูุชู ุงูุญูุธ:
1. **ุชุญูู ูู console** (F12) ููุฃุฎุทุงุก
2. **ุชุฃูุฏ ูู ูุฌูุฏ ุงูุจูุงูุงุช ูู localStorage:**
   ```javascript
   console.log(localStorage.getItem('properties_backup'));
   ```

### ุฅุฐุง ุชุบูุฑุช ุงูุชูุงุฑูุฎ:
1. **ุชุฃูุฏ ูู ุฅุฏุฎุงู ุงูุชุงุฑูุฎ ุจุตูุบุฉ ุตุญูุญุฉ**
2. **ุชุญูู ูู console ููุฑุณุงุฆู**

### ููุญูุธ ุงููุฏูู:
```javascript
// ูู console
saveDataLocally();
```

## ๐ ุงููููุฒุงุช ุงูุฌุฏูุฏุฉ

### 1. **ุญูุธ ุฐูู:**
- ุญูุธ ุชููุงุฆู ุฎูุงู ุซุงููุฉ ูู ุงูุชุนุฏูู
- ูุณุฎุฉ ุงุญุชูุงุทูุฉ ูู localStorage
- ุญูุธ ุณุญุงุจู ูู Supabase

### 2. **ุนุฑุถ ูุญุณู:**
- ุฅุฌูุงูู ูุจุงุดุฑ ูู ุงููููุฐุฌ
- ุนุฏุฏ ุงูุฃูุณุงุท ูุน ุงููุจูุบ
- ุชุญุฏูุซ ููุฑู ููููู

### 3. **ุงุณุชูุฑุงุฑ ุงูุจูุงูุงุช:**
- ุงุณุชุนุงุฏุฉ ุชููุงุฆูุฉ ุนูุฏ ุงูุชุญููู
- ุญูุธ ุนูุฏ ุฅุบูุงู ุงูููุงูุฐ
- ุญูุงูุฉ ูู ููุฏุงู ุงูุจูุงูุงุช

## โ ุงุฎุชุจุงุฑ ุงูุฅุตูุงุญุงุช

### ุงุฎุชุจุงุฑ 1: ุฅุถุงูุฉ ูุณุท ุฌุฏูุฏ
1. ุงูุชุญ ุชุญุฑูุฑ ุนูุงุฑ
2. ุฃุถู ูุณุท ุจุชุงุฑูุฎ ููุจูุบ
3. ุชุญูู ูู ุธููุฑ ุงูุฅุฌูุงูู
4. ุฃุนุฏ ุชุญููู ุงูุตูุญุฉ
5. ุชุญูู ูู ุงุณุชูุฑุงุฑ ุงูุจูุงูุงุช

### ุงุฎุชุจุงุฑ 2: ุชุนุฏูู ูุณุท ููุฌูุฏ
1. ุงูุชุญ ุชุญุฑูุฑ ุนูุงุฑ ูู ุฃูุณุงุท
2. ุบูุฑ ูุจูุบ ุฃู ุชุงุฑูุฎ ูุณุท
3. ุชุญูู ูู ุชุญุฏูุซ ุงูุฅุฌูุงูู
4. ุฃุนุฏ ุชุญููู ุงูุตูุญุฉ
5. ุชุญูู ูู ุญูุธ ุงูุชุบููุฑุงุช

### ุงุฎุชุจุงุฑ 3: ุงูุชูุงุฑูุฎ
1. ุฃุฏุฎู ุชุงุฑูุฎ ูุญุฏุฏ ูููุณุท
2. ุงุญูุธ ูุงุฎุฑุฌ ูู ุงููููุฐุฌ
3. ุงูุชุญ ุงููููุฐุฌ ูุฑุฉ ุฃุฎุฑู
4. ุชุญูู ูู ุฃู ุงูุชุงุฑูุฎ ูู ูุชุบูุฑ

## ๐ ุงููุชูุฌุฉ ุงูููุงุฆูุฉ

**ุฌููุน ูุดุงูู ุงูุฃูุณุงุท ุชู ุญููุง:**
- โ **ุงูุฅุฌูุงููุงุช ุชูุญูุธ ูุชุธูุฑ ุจุดูู ุตุญูุญ**
- โ **ุงูุชูุงุฑูุฎ ุชุจูู ููุง ุฃุฏุฎููุง ุงููุณุชุฎุฏู**
- โ **ุญูุธ ุชููุงุฆู ูุฌููุน ุงูุชุบููุฑุงุช**
- โ **ุงุณุชุนุงุฏุฉ ุงูุจูุงูุงุช ุนูุฏ ุฅุนุงุฏุฉ ุงูุชุญููู**
- โ **ุนุฑุถ ูุจุงุดุฑ ููุฅุฌูุงููุงุช ูู ุงููููุฐุฌ**

**ุงููุธุงู ุงูุขู ูุณุชูุฑ ูููุซูู! ๐**
