<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ุงุฎุชุจุงุฑ ูุฒุงููุฉ ูุนูููุงุช ุงูุตู ุนุจุฑ ุงููุญุฏุงุช</title>
    <style>
        body {
            font-family: 'Tajawal', sans-serif;
            margin: 20px;
            background: #f5f5f5;
        }
        .container {
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            max-width: 1400px;
            margin: 0 auto;
        }
        .result {
            margin: 10px 0;
            padding: 15px;
            border-radius: 5px;
            border-left: 4px solid #007bff;
            background: #f8f9fa;
        }
        .success { border-left-color: #28a745; background: #d4edda; }
        .error { border-left-color: #dc3545; background: #f8d7da; }
        .warning { border-left-color: #ffc107; background: #fff3cd; }
        .info { border-left-color: #17a2b8; background: #d1ecf1; }
        button {
            background: #007bff;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            margin: 5px;
        }
        button:hover { background: #0056b3; }
        .test-section {
            margin: 20px 0;
            padding: 20px;
            border: 1px solid #ddd;
            border-radius: 8px;
            background: #f8f9fa;
        }
        .test-section h3 {
            margin-top: 0;
            color: #333;
        }
        .units-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }
        .unit-card {
            background: white;
            border: 1px solid #e9ecef;
            border-radius: 8px;
            padding: 20px;
            position: relative;
        }
        .unit-card h4 {
            margin: 0 0 15px 0;
            color: #007bff;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        .unit-info {
            font-size: 14px;
            line-height: 1.6;
        }
        .unit-info div {
            margin: 8px 0;
            padding: 5px 0;
            border-bottom: 1px solid #f0f0f0;
        }
        .unit-info strong {
            color: #495057;
            display: inline-block;
            width: 120px;
        }
        .deed-info {
            background: #fff3cd;
            border: 1px solid #ffc107;
            border-radius: 5px;
            padding: 15px;
            margin: 15px 0;
        }
        .deed-info h5 {
            margin: 0 0 10px 0;
            color: #856404;
        }
        .deed-field {
            margin: 5px 0;
            font-size: 13px;
        }
        .deed-field strong {
            color: #856404;
        }
        .sync-indicator {
            position: absolute;
            top: 10px;
            left: 10px;
            background: #28a745;
            color: white;
            padding: 5px 10px;
            border-radius: 15px;
            font-size: 12px;
            font-weight: bold;
        }
        .sync-indicator.changed {
            background: #dc3545;
            animation: pulse 1s infinite;
        }
        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.5; }
            100% { opacity: 1; }
        }
        .steps {
            background: white;
            padding: 20px;
            border-radius: 8px;
            border: 1px solid #e9ecef;
        }
        .step {
            display: flex;
            align-items: center;
            margin: 15px 0;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 5px;
        }
        .step-number {
            background: #007bff;
            color: white;
            width: 35px;
            height: 35px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-left: 15px;
            font-weight: bold;
            font-size: 16px;
        }
        .highlight {
            background: #fff3cd;
            padding: 3px 8px;
            border-radius: 4px;
            font-weight: bold;
            color: #856404;
        }
        .feature-box {
            background: linear-gradient(135deg, #e3f2fd, #bbdefb);
            border: 1px solid #2196f3;
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
        }
        .feature-box h4 {
            margin: 0 0 15px 0;
            color: #1976d2;
        }
        .feature-list {
            list-style: none;
            padding: 0;
        }
        .feature-list li {
            margin: 8px 0;
            padding-right: 25px;
            position: relative;
        }
        .feature-list li:before {
            content: "๐";
            position: absolute;
            right: 0;
            font-size: 16px;
        }
        .console-output {
            background: #2d3748;
            color: #e2e8f0;
            padding: 15px;
            border-radius: 8px;
            font-family: 'Courier New', monospace;
            font-size: 12px;
            max-height: 300px;
            overflow-y: auto;
            margin: 15px 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>๐ ุงุฎุชุจุงุฑ ูุฒุงููุฉ ูุนูููุงุช ุงูุตู ุนุจุฑ ุงููุญุฏุงุช</h1>
        <p>ูุฐุง ุงูุงุฎุชุจุงุฑ ูุชุญูู ูู ุฃู ุชุนุฏูู ูุนูููุงุช ุงูุตู ูู ุฃู ูุญุฏุฉ ููุทุจู ุชููุงุฆูุงู ุนูู ุฌููุน ูุญุฏุงุช ุงูุนูุงุฑ</p>
        
        <div class="feature-box">
            <h4>๐ฏ ุงูููุฒุฉ ุงูุฌุฏูุฏุฉ: ุชุฑุงุจุท ูุนูููุงุช ุงูุตู</h4>
            <ul class="feature-list">
                <li>ูุนูููุงุช ุงูุตู ูุดุชุฑูุฉ ุจูู ุฌููุน ูุญุฏุงุช ุงูุนูุงุฑ ุงููุงุญุฏ</li>
                <li>ุชุนุฏูู ูุนูููุงุช ุงูุตู ูู ุฃู ูุญุฏุฉ ููุทุจู ุนูู ุงูุฌููุน</li>
                <li>ูุฒุงููุฉ ููุฑูุฉ ูุน ูุงุนุฏุฉ ุงูุจูุงูุงุช ุงูุณุญุงุจูุฉ</li>
                <li>ุนุฏู ุชุฃุซูุฑ ุนูู ุงููุนูููุงุช ุงูุฎุงุตุฉ ุจูู ูุญุฏุฉ</li>
                <li>ุฑุณุงุฆู ุชุฃููุฏ ุชูุตูููุฉ ุนู ุนุฏุฏ ุงููุญุฏุงุช ุงููุญุฏุซุฉ</li>
            </ul>
        </div>

        <div class="test-section">
            <h3>๐ ุงูุญููู ุงููุชุฑุงุจุทุฉ</h3>
            <div class="deed-info">
                <h5>๐ข ูุนูููุงุช ุงูุตู ุงููุดุชุฑูุฉ:</h5>
                <div class="deed-field"><strong>ุฑูู ุงูุตู:</strong> ูุทุจู ุนูู ุฌููุน ุงููุญุฏุงุช</div>
                <div class="deed-field"><strong>ูุณุงุญุฉ ุงูุตู:</strong> ูุทุจู ุนูู ุฌููุน ุงููุญุฏุงุช</div>
                <div class="deed-field"><strong>ุงูุณุฌู ุงูุนููู:</strong> ูุทุจู ุนูู ุฌููุน ุงููุญุฏุงุช</div>
                <div class="deed-field"><strong>ุงููุงูู:</strong> ูุทุจู ุนูู ุฌููุน ุงููุญุฏุงุช</div>
                <div class="deed-field"><strong>ูููุน ุงูุนูุงุฑ:</strong> ูุทุจู ุนูู ุฌููุน ุงููุญุฏุงุช</div>
            </div>
            <div style="background: #d1ecf1; border: 1px solid #17a2b8; border-radius: 5px; padding: 15px; margin: 15px 0;">
                <h5 style="margin: 0 0 10px 0; color: #0c5460;">๐ ุงููุนูููุงุช ุงูุชู ูุง ุชุชุฃุซุฑ:</h5>
                <div style="font-size: 14px;">
                    <div>โข ุฑูู ุงููุญุฏุฉ (ุฎุงุต ุจูู ูุญุฏุฉ)</div>
                    <div>โข ูุนูููุงุช ุงููุณุชุฃุฌุฑ ูุงูุนูุฏ (ุฎุงุตุฉ ุจูู ูุญุฏุฉ)</div>
                    <div>โข ูุณุงุญุฉ ุงููุญุฏุฉ (ูุฏ ุชุฎุชูู ุนู ูุณุงุญุฉ ุงูุตู)</div>
                    <div>โข ุชูุงุตูู ุงูุฃูุณุงุท ูุงููุจุงูุบ (ุฎุงุตุฉ ุจูู ุนูุฏ)</div>
                </div>
            </div>
        </div>

        <div class="test-section">
            <h3>๐งช ุงุฎุชุจุงุฑ ุชูุงุนูู</h3>
            <button onclick="createMultiUnitProperty()" style="background: #28a745; font-size: 16px; padding: 15px 30px;">
                <i class="fas fa-plus"></i> ุฅูุดุงุก ุนูุงุฑ ูุชุนุฏุฏ ุงููุญุฏุงุช
            </button>
            <button onclick="refreshUnitsDisplay()" style="background: #17a2b8; font-size: 16px; padding: 15px 30px;">
                <i class="fas fa-sync"></i> ุชุญุฏูุซ ุงูุนุฑุถ
            </button>
            <button onclick="testPerformance()" style="background: #ffc107; color: #000; font-size: 16px; padding: 15px 30px;">
                <i class="fas fa-stopwatch"></i> ุงุฎุชุจุงุฑ ุงูุฃุฏุงุก
            </button>
            <button onclick="clearConsole()" style="background: #6c757d;">
                <i class="fas fa-trash"></i> ูุณุญ ุงูุณุฌู
            </button>
        </div>

        <div class="test-section">
            <h3>๐ข ูุญุฏุงุช ุงูุนูุงุฑ</h3>
            <div id="unitsDisplay" class="units-grid">
                <p>ุงุถุบุท "ุฅูุดุงุก ุนูุงุฑ ูุชุนุฏุฏ ุงููุญุฏุงุช" ูุจุฏุก ุงูุงุฎุชุจุงุฑ</p>
            </div>
        </div>

        <div class="test-section">
            <h3>๐ฏ ุฎุทูุงุช ุงูุงุฎุชุจุงุฑ</h3>
            <div class="steps">
                <div class="step">
                    <div class="step-number">1</div>
                    <div>ุงุถุบุท <span class="highlight">"ุฅูุดุงุก ุนูุงุฑ ูุชุนุฏุฏ ุงููุญุฏุงุช"</span> ูุฅูุดุงุก ุนูุงุฑ ุจู 3 ูุญุฏุงุช</div>
                </div>
                <div class="step">
                    <div class="step-number">2</div>
                    <div><strong>ุงุฎุชุจุงุฑ ุงููุฒุงููุฉ:</strong> ุงุถุบุท <span class="highlight">"ุชุญุฑูุฑ ูุฐู ุงููุญุฏุฉ"</span> ูุบููุฑ <span class="highlight">ูุณุงุญุฉ ุงูุตู</span> ูู 1500 ุฅูู 2000</div>
                </div>
                <div class="step">
                    <div class="step-number">3</div>
                    <div><strong>ุงุฎุชุจุงุฑ ุนุฏู ุงููุฒุงููุฉ:</strong> ุงุถุบุท <span class="highlight">"ุชุญุฑูุฑ ูุฐู ุงููุญุฏุฉ"</span> ูุบููุฑ ููุท <span class="highlight">ุงุณู ุงููุณุชุฃุฌุฑ</span></div>
                </div>
                <div class="step">
                    <div class="step-number">4</div>
                    <div>ุฑุงูุจ ุงููุฑู ูู ุฑุณุงุฆู ุงููุฌุงุญ ูููุช ุงูุญูุธ</div>
                </div>
                <div class="step">
                    <div class="step-number">5</div>
                    <div>ุงุถุบุท <span class="highlight">"ุงุฎุชุจุงุฑ ุงูุฃุฏุงุก"</span> ูููุงุฑูุฉ ุฃููุงุช ุงูุญูุธ</div>
                </div>
            </div>
        </div>

        <div class="test-section">
            <h3>๐ ุฃูุซูุฉ ุนูู ุฑุณุงุฆู ุงููุฌุงุญ ุงููุชููุนุฉ</h3>

            <h4>๐ ุนูุฏ ุชุนุฏูู ูุนูููุงุช ุงูุตู (ูุน ุงููุฒุงููุฉ):</h4>
            <div class="result success">
                <strong>โ ุชู ุญูุธ ุงูุชุบููุฑุงุช ุจูุฌุงุญ!</strong><br>
                ๐ ุชู ุชุญุฏูุซ ูุนูููุงุช ุงูุตู ูู 3 ูุญุฏุฉ<br>
                ๐ ูุนูููุงุช ุงูุตู ุงููุญุฏุซุฉ:<br>
                โข ูุณุงุญุฉ ุงูุตู: 2000<br>
                โ๏ธ ุชู ุญูุธ 3 ูุญุฏุฉ ูู ุงูุณุญุงุจุฉ<br>
                โ ุชู ุญูุธ ุงูุชุบููุฑุงุช ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช ุงูุณุญุงุจูุฉ
            </div>

            <h4>โก ุนูุฏ ุชุนุฏูู ูุนูููุงุช ุงููุญุฏุฉ ููุท (ุจุฏูู ูุฒุงููุฉ):</h4>
            <div class="result info">
                <strong>โ ุชู ุญูุธ ุงูุชุบููุฑุงุช ุจูุฌุงุญ!</strong><br>
                ๐ก ุชู ุญูุธ ุชุนุฏููุงุช ุงููุญุฏุฉ ููุท (ูู ุชุชุบูุฑ ูุนูููุงุช ุงูุตู)<br>
                โ ุชู ุญูุธ ุงูุชุบููุฑุงุช ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช ุงูุณุญุงุจูุฉ
            </div>
        </div>

        <div class="test-section">
            <h3>๐ฅ๏ธ ุณุฌู ูุญุฏุฉ ุงูุชุญูู</h3>
            <p>ุฑุงูุจ ูุฐุง ุงูุณุฌู ุฃุซูุงุก ุชุญุฑูุฑ ูุนูููุงุช ุงูุตู:</p>
            <div id="consoleOutput" class="console-output">
                ุงูุชุธุงุฑ ุจุฏุก ุงูุงุฎุชุจุงุฑ...
            </div>
        </div>

        <div id="results"></div>
    </div>

    <!-- ุชุญููู ุงูููุชุจุงุช ุงููุทููุจุฉ -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="supabase-config.js"></script>
    <script src="script.js"></script>
    
    <script>
        // ุชุฎุฒูู console.log ุงูุฃุตูู
        const originalConsoleLog = console.log;
        const originalConsoleError = console.error;
        const originalConsoleWarn = console.warn;

        // ุฅุนุงุฏุฉ ุชูุฌูู console.log ุฅูู ุงูุนุฑุถ
        function interceptConsole() {
            const consoleOutput = document.getElementById('consoleOutput');
            
            console.log = function(...args) {
                originalConsoleLog.apply(console, args);
                const message = args.map(arg => 
                    typeof arg === 'object' ? JSON.stringify(arg, null, 2) : String(arg)
                ).join(' ');
                
                if (message.includes('ูุฒุงููุฉ ูุนูููุงุช ุงูุตู') || 
                    message.includes('ุชู ุงูุนุซูุฑ ุนูู') || 
                    message.includes('ูุนูููุงุช ุงูุตู ุงูุฌุฏูุฏุฉ') || 
                    message.includes('ุชู ุชุญุฏูุซ') ||
                    message.includes('ุชู ุญูุธ') ||
                    message.includes('ุงููุญุฏุฉ')) {
                    
                    const timestamp = new Date().toLocaleTimeString();
                    consoleOutput.innerHTML += `<div style="color: #68d391;">[${timestamp}] ${message}</div>`;
                    consoleOutput.scrollTop = consoleOutput.scrollHeight;
                }
            };
            
            console.error = function(...args) {
                originalConsoleError.apply(console, args);
                const message = args.join(' ');
                const timestamp = new Date().toLocaleTimeString();
                consoleOutput.innerHTML += `<div style="color: #fc8181;">[${timestamp}] ERROR: ${message}</div>`;
                consoleOutput.scrollTop = consoleOutput.scrollHeight;
            };
            
            console.warn = function(...args) {
                originalConsoleWarn.apply(console, args);
                const message = args.join(' ');
                const timestamp = new Date().toLocaleTimeString();
                consoleOutput.innerHTML += `<div style="color: #f6e05e;">[${timestamp}] WARN: ${message}</div>`;
                consoleOutput.scrollTop = consoleOutput.scrollHeight;
            };
        }

        function addResult(type, title, content) {
            const resultsDiv = document.getElementById('results');
            const resultDiv = document.createElement('div');
            resultDiv.className = `result ${type}`;
            resultDiv.innerHTML = `
                <strong>${title}</strong><br>
                ${content}
            `;
            resultsDiv.appendChild(resultDiv);
            resultsDiv.scrollTop = resultsDiv.scrollHeight;
        }

        function clearConsole() {
            document.getElementById('consoleOutput').innerHTML = 'ุชู ูุณุญ ุงูุณุฌู...';
        }

        function createMultiUnitProperty() {
            addResult('info', '๐ ุฅูุดุงุก ุนูุงุฑ ูุชุนุฏุฏ ุงููุญุฏุงุช...', 'ุฌุงุฑู ุฅูุดุงุก ุนูุงุฑ ุจู 3 ูุญุฏุงุช ููุงุฎุชุจุงุฑ');
            
            if (!window.properties) window.properties = [];
            
            const propertyName = 'ุจุฑุฌ ุงูุฃูุฏูุณ';
            const baseProperty = {
                'ุงุณู ุงูุนูุงุฑ': propertyName,
                'ุงููุฏููุฉ': 'ุงูุฑูุงุถ',
                'ุฑูู ุงูุตู': 'DEED555666777',
                'ูุณุงุญุฉุงูุตู': '1500',
                'ุงูุณุฌู ุงูุนููู ': 'REG555666',
                'ุงููุงูู': 'ุดุฑูุฉ ุงูุฃูุฏูุณ ุงูุนูุงุฑูุฉ',
                'ูููุน ุงูุนูุงุฑ': 'https://maps.google.com/andalus-tower'
            };
            
            // ุฅูุดุงุก 3 ูุญุฏุงุช
            const units = [
                {
                    ...baseProperty,
                    'ุฑูู  ุงููุญุฏุฉ ': 'A101',
                    'ุงุณู ุงููุณุชุฃุฌุฑ': 'ุฃุญูุฏ ูุญูุฏ ุนูู',
                    'ุฑูู ุงูุนูุฏ': 'CONTRACT-A101-2024',
                    'ูููุฉ  ุงูุงูุฌุงุฑ ': 4000,
                    'ุงููุณุงุญุฉ': 120
                },
                {
                    ...baseProperty,
                    'ุฑูู  ุงููุญุฏุฉ ': 'A102',
                    'ุงุณู ุงููุณุชุฃุฌุฑ': 'ูุงุทูุฉ ุฃุญูุฏ',
                    'ุฑูู ุงูุนูุฏ': 'CONTRACT-A102-2024',
                    'ูููุฉ  ุงูุงูุฌุงุฑ ': 3800,
                    'ุงููุณุงุญุฉ': 110
                },
                {
                    ...baseProperty,
                    'ุฑูู  ุงููุญุฏุฉ ': 'A103',
                    'ุงุณู ุงููุณุชุฃุฌุฑ': '',
                    'ุฑูู ุงูุนูุฏ': '',
                    'ูููุฉ  ุงูุงูุฌุงุฑ ': 0,
                    'ุงููุณุงุญุฉ': 130
                }
            ];
            
            // ุฅุถุงูุฉ ุฃู ุชุญุฏูุซ ุงููุญุฏุงุช
            units.forEach(unit => {
                const existingIndex = window.properties.findIndex(p => 
                    p['ุฑูู  ุงููุญุฏุฉ '] === unit['ุฑูู  ุงููุญุฏุฉ '] && 
                    p['ุงุณู ุงูุนูุงุฑ'] === unit['ุงุณู ุงูุนูุงุฑ']
                );
                
                if (existingIndex === -1) {
                    window.properties.push(unit);
                } else {
                    window.properties[existingIndex] = unit;
                }
            });
            
            // ุญูุธ ูุญููุงู
            if (typeof saveDataLocally === 'function') {
                saveDataLocally();
            }
            
            // ุนุฑุถ ุงููุญุฏุงุช
            refreshUnitsDisplay();
            
            addResult('success', 'โ ุชู ุฅูุดุงุก ุงูุนูุงุฑ', `
                ุชู ุฅูุดุงุก ุนูุงุฑ "${propertyName}" ุจู ${units.length} ูุญุฏุงุช:<br>
                โข ุงููุญุฏุฉ A101: ูุคุฌุฑุฉ ูุฃุญูุฏ ูุญูุฏ ุนูู<br>
                โข ุงููุญุฏุฉ A102: ูุคุฌุฑุฉ ููุงุทูุฉ ุฃุญูุฏ<br>
                โข ุงููุญุฏุฉ A103: ูุงุฑุบุฉ<br><br>
                <strong>ูุนูููุงุช ุงูุตู ุงููุดุชุฑูุฉ:</strong><br>
                โข ุฑูู ุงูุตู: ${baseProperty['ุฑูู ุงูุตู']}<br>
                โข ูุณุงุญุฉ ุงูุตู: ${baseProperty['ูุณุงุญุฉุงูุตู']} ูยฒ<br>
                โข ุงููุงูู: ${baseProperty['ุงููุงูู']}<br><br>
                ุฌุฑุจ ุงูุขู ุชุญุฑูุฑ ูุนูููุงุช ุงูุตู ูู ุฃู ูุญุฏุฉ!
            `);
        }

        function refreshUnitsDisplay() {
            const container = document.getElementById('unitsDisplay');
            
            if (!window.properties) {
                container.innerHTML = '<p>ูุง ุชูุฌุฏ ุจูุงูุงุช. ุงุถุบุท "ุฅูุดุงุก ุนูุงุฑ ูุชุนุฏุฏ ุงููุญุฏุงุช" ุฃููุงู</p>';
                return;
            }
            
            const andalusUnits = window.properties.filter(p => p['ุงุณู ุงูุนูุงุฑ'] === 'ุจุฑุฌ ุงูุฃูุฏูุณ');
            
            if (andalusUnits.length === 0) {
                container.innerHTML = '<p>ูู ูุชู ุงูุนุซูุฑ ุนูู ูุญุฏุงุช ุจุฑุฌ ุงูุฃูุฏูุณ. ุงุถุบุท "ุฅูุดุงุก ุนูุงุฑ ูุชุนุฏุฏ ุงููุญุฏุงุช" ุฃููุงู</p>';
                return;
            }
            
            container.innerHTML = andalusUnits.map(unit => `
                <div class="unit-card">
                    <div class="sync-indicator">ูุชุฒุงูู</div>
                    <h4>
                        <i class="fas fa-home"></i>
                        ุงููุญุฏุฉ ${unit['ุฑูู  ุงููุญุฏุฉ ']}
                    </h4>
                    
                    <div class="unit-info">
                        <div><strong>ุงููุณุชุฃุฌุฑ:</strong> ${unit['ุงุณู ุงููุณุชุฃุฌุฑ'] || 'ูุงุฑุบุฉ'}</div>
                        <div><strong>ุฑูู ุงูุนูุฏ:</strong> ${unit['ุฑูู ุงูุนูุฏ'] || '-'}</div>
                        <div><strong>ุงูุฅูุฌุงุฑ:</strong> ${unit['ูููุฉ  ุงูุงูุฌุงุฑ '] || 0} ุฑูุงู</div>
                        <div><strong>ูุณุงุญุฉ ุงููุญุฏุฉ:</strong> ${unit['ุงููุณุงุญุฉ'] || 0} ูยฒ</div>
                    </div>
                    
                    <div class="deed-info">
                        <h5>๐ ูุนูููุงุช ุงูุตู ุงููุดุชุฑูุฉ</h5>
                        <div class="deed-field"><strong>ุฑูู ุงูุตู:</strong> ${unit['ุฑูู ุงูุตู'] || 'ุบูุฑ ูุญุฏุฏ'}</div>
                        <div class="deed-field"><strong>ูุณุงุญุฉ ุงูุตู:</strong> ${unit['ูุณุงุญุฉุงูุตู'] || 'ุบูุฑ ูุญุฏุฏ'} ูยฒ</div>
                        <div class="deed-field"><strong>ุงูุณุฌู ุงูุนููู:</strong> ${unit['ุงูุณุฌู ุงูุนููู '] || 'ุบูุฑ ูุญุฏุฏ'}</div>
                        <div class="deed-field"><strong>ุงููุงูู:</strong> ${unit['ุงููุงูู'] || 'ุบูุฑ ูุญุฏุฏ'}</div>
                        <div class="deed-field"><strong>ูููุน ุงูุนูุงุฑ:</strong> ${unit['ูููุน ุงูุนูุงุฑ'] ? 'ูุญุฏุฏ' : 'ุบูุฑ ูุญุฏุฏ'}</div>
                    </div>
                    
                    <button onclick="editUnit('${unit['ุฑูู  ุงููุญุฏุฉ ']}', '${unit['ุงุณู ุงูุนูุงุฑ']}')" 
                            style="width: 100%; margin-top: 15px; background: #007bff;">
                        <i class="fas fa-edit"></i> ุชุญุฑูุฑ ูุฐู ุงููุญุฏุฉ
                    </button>
                </div>
            `).join('');
        }

        function editUnit(unitNumber, propertyName) {
            addResult('info', '๐ ูุชุญ ูุงูุฐุฉ ุงูุชุญุฑูุฑ...', `
                ุฌุงุฑู ูุชุญ ูุงูุฐุฉ ุชุญุฑูุฑ ุงููุญุฏุฉ ${unitNumber}<br>
                ุฑุงูุจ ุณุฌู ูุญุฏุฉ ุงูุชุญูู ุฃุฏูุงู ููุชุงุจุนุฉ ุนูููุฉ ุงููุฒุงููุฉ
            `);

            try {
                const unit = window.properties?.find(p =>
                    p['ุฑูู  ุงููุญุฏุฉ '] === unitNumber &&
                    p['ุงุณู ุงูุนูุงุฑ'] === propertyName
                );

                if (unit && typeof showCardEditModal === 'function') {
                    showCardEditModal(unit['ุฑูู ุงูุนูุฏ'] || '', propertyName, unitNumber);

                    addResult('success', 'โ ุชู ูุชุญ ูุงูุฐุฉ ุงูุชุญุฑูุฑ', `
                        ุชุญูู ูู ุงููุงูุฐุฉ ุงูููุชูุญุฉ:<br>
                        <strong>๐ ูุงุฎุชุจุงุฑ ุงููุฒุงููุฉ:</strong><br>
                        โข ุงุจุญุซ ุนู ูุณู "ูุนูููุงุช ุงูุนูุงุฑ ูุงูุตู"<br>
                        โข ุฌุฑุจ ุชุบููุฑ ูุณุงุญุฉ ุงูุตู ูู 1500 ุฅูู 2000<br>
                        โข ุงุญูุธ ูุฑุงูุจ ุฑุณุงูุฉ "ุชู ุชุญุฏูุซ ูุนูููุงุช ุงูุตู ูู 3 ูุญุฏุฉ"<br><br>
                        <strong>โก ูุงุฎุชุจุงุฑ ุนุฏู ุงููุฒุงููุฉ:</strong><br>
                        โข ุงุจุญุซ ุนู ูุณู "ูุนูููุงุช ุงููุณุชุฃุฌุฑ"<br>
                        โข ุฌุฑุจ ุชุบููุฑ ุงุณู ุงููุณุชุฃุฌุฑ ููุท<br>
                        โข ุงุญูุธ ูุฑุงูุจ ุฑุณุงูุฉ "ุชู ุญูุธ ุชุนุฏููุงุช ุงููุญุฏุฉ ููุท"<br><br>
                        ูุงุญุธ ุงููุฑู ูู ุณุฑุนุฉ ุงูุญูุธ!
                    `);
                } else {
                    addResult('error', 'โ ุฎุทุฃ', 'ูู ูุชู ุงูุนุซูุฑ ุนูู ุงููุญุฏุฉ ุฃู ุฏุงูุฉ ุงูุชุญุฑูุฑ');
                }
            } catch (error) {
                addResult('error', 'โ ุฎุทุฃ ูู ูุชุญ ูุงูุฐุฉ ุงูุชุญุฑูุฑ', `ุฎุทุฃ: ${error.message}`);
            }
        }

        function testPerformance() {
            addResult('warning', 'โก ุงุฎุชุจุงุฑ ุงูุฃุฏุงุก', `
                ูุฐุง ุงูุงุฎุชุจุงุฑ ููุถุญ ุงููุฑู ูู ุงูุฃุฏุงุก:<br><br>
                <strong>๐ ุนูุฏ ุชุนุฏูู ูุนูููุงุช ุงูุตู:</strong><br>
                โข ูุชู ูุญุต ุงูุชุบููุฑุงุช ูู ุญููู ุงูุตู<br>
                โข ุฅุฐุง ููุฌุฏุช ุชุบููุฑุงุชุ ุชุญุฏุซ ุงููุฒุงููุฉ<br>
                โข ูุชู ุชุญุฏูุซ ุฌููุน ุงููุญุฏุงุช (3 ูุญุฏุงุช)<br>
                โข ูุชู ุญูุธ 3 ูุญุฏุงุช ูู ุงูุณุญุงุจุฉ<br>
                โข ููุช ุฃุทูู ููุญูุธ<br><br>
                <strong>โก ุนูุฏ ุชุนุฏูู ูุนูููุงุช ุงููุญุฏุฉ ููุท:</strong><br>
                โข ูุชู ูุญุต ุงูุชุบููุฑุงุช ูู ุญููู ุงูุตู<br>
                โข ูุง ุชูุฌุฏ ุชุบููุฑุงุช ูู ุญููู ุงูุตู<br>
                โข ุชุฎุทู ุงููุฒุงููุฉ ุชูุงูุงู<br>
                โข ูุชู ุญูุธ ูุญุฏุฉ ูุงุญุฏุฉ ููุท<br>
                โข ููุช ุฃุณุฑุน ููุญูุธ<br><br>
                <strong>๐ก ุงููุชูุฌุฉ:</strong><br>
                ุงููุธุงู ุงูุขู ุฐูู ููุง ูููู ุจูุฒุงููุฉ ุบูุฑ ุถุฑูุฑูุฉ!<br>
                ุฌุฑุจ ุชุญุฑูุฑ ูุนูููุงุช ูุฎุชููุฉ ูุฑุงูุจ ุงููุฑู ูู ุงูุฃุฏุงุก.
            `);

            // ุฅุถุงูุฉ ูุคุดุฑ ุฃุฏุงุก ุจุตุฑู
            const performanceIndicator = document.createElement('div');
            performanceIndicator.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                color: white;
                padding: 15px 20px;
                border-radius: 10px;
                box-shadow: 0 4px 15px rgba(0,0,0,0.2);
                z-index: 10000;
                font-weight: bold;
                animation: slideIn 0.5s ease-out;
            `;
            performanceIndicator.innerHTML = `
                <div style="text-align: center;">
                    <div style="font-size: 18px; margin-bottom: 5px;">โก ูุฑุงูุจ ุงูุฃุฏุงุก</div>
                    <div style="font-size: 12px; opacity: 0.9;">ุฑุงูุจ ุณุฑุนุฉ ุงูุญูุธ</div>
                </div>
            `;

            document.body.appendChild(performanceIndicator);

            // ุฅุฒุงูุฉ ุงููุคุดุฑ ุจุนุฏ 5 ุซูุงู
            setTimeout(() => {
                if (performanceIndicator.parentNode) {
                    performanceIndicator.remove();
                }
            }, 5000);
        }

        // ุชุดุบูู ุชููุงุฆู ุนูุฏ ุชุญููู ุงูุตูุญุฉ
        window.addEventListener('load', () => {
            interceptConsole();
            
            addResult('success', '๐ ุฌุงูุฒ ููุงุฎุชุจุงุฑ', `
                ุชู ุชุญููู ุฌููุน ุงููููุงุช ุงููุทููุจุฉ<br>
                ุชู ุชูุนูู ูุฑุงูุจุฉ ุณุฌู ูุญุฏุฉ ุงูุชุญูู<br>
                ุงุถุบุท "ุฅูุดุงุก ุนูุงุฑ ูุชุนุฏุฏ ุงููุญุฏุงุช" ููุจุฏุก
            `);
            
            addResult('info', '๐ก ุชุนูููุงุช', `
                ูุฐุง ุงูุงุฎุชุจุงุฑ ูุชุญูู ูู ุชุฑุงุจุท ูุนูููุงุช ุงูุตู:<br>
                โข ุชุนุฏูู ูุนูููุงุช ุงูุตู ูู ุฃู ูุญุฏุฉ<br>
                โข ุชุทุจูู ุงูุชุบููุฑุงุช ุนูู ุฌููุน ูุญุฏุงุช ุงูุนูุงุฑ<br>
                โข ูุฒุงููุฉ ููุฑูุฉ ูุน ุงูุณุญุงุจุฉ<br>
                โข ุนุฏู ุชุฃุซูุฑ ุนูู ุงููุนูููุงุช ุงูุฎุงุตุฉ ุจูู ูุญุฏุฉ<br><br>
                ุงุถุบุท "ุฅูุดุงุก ุนูุงุฑ ูุชุนุฏุฏ ุงููุญุฏุงุช" ููุจุฏุก
            `);
        });
    </script>
</body>
</html>
